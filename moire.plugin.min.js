// +----------------------------------------------------------------------
// | Name 云纹框架
// +----------------------------------------------------------------------
// | Author 唐启云 <tqy@fxri.net>
// +----------------------------------------------------------------------
// | Copyright Copyright © 2017-2099 方弦研究所. All rights reserved.
// +----------------------------------------------------------------------
// | Link https://www.fxri.net
// +----------------------------------------------------------------------
// | Version v0.4
// +----------------------------------------------------------------------
fxView["machine"]["deployer"](["material","elem","checkbox","main"],function(){var e,a,i,l={};l["base"]=e={};l["dark"]=a={};l["tray"]=i={};l["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:1},a);a["title"]=fxBase["base"]["lang"](a["title"]);l["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,l,i],a);a["run"]["init"]++};l["data"]=function(){if(isBlank(a["shelf"]["data"])){a["shelf"]["data"]={}}else if(!isAorO(a["shelf"]["data"])){a["shelf"]["data"]=fxBase["text"]["explode"](",",a["shelf"]["data"])}a["shelf"]["dataEcho"]=fxBase["text"]["implode"]("|",Object.values(a["shelf"]["data"]).reverse());fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,l,i],a);a["run"]["data"]++};l["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:"<input>",attr:{type:"checkbox",id:a["id"],name:a["field"],title:a["title"]}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};l["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};l["echo"]=function(){a["echo"]=a["elem"].prop("checked")?1:0;fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,l,i],a);a["run"]["echo"]++};l["reset"]=function(){a["elem"].prop("checked",!!parseInt(a["data"]));fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,l,i],a);a["run"]["reset"]++};l["clean"]=function(){a["elem"].prop("checked",false);fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,l,i],a);a["run"]["clean"]++};return l});fxView["machine"]["deployer"](["material","elem","checkbox","skin","deploy"],{view:function(e,a,i,l){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]+e["requireMark"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"layui-input"})}});fxView["machine"]["deployer"](["material","elem","date","main"],function(){var e,a,i,l={};l["base"]=e={};l["dark"]=a={};l["tray"]=i={};l["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:1,default:["choice",a["title"]],plugin:{type:"datetime"}},a);a["title"]=fxBase["base"]["lang"](a["title"]);a["default"]=fxBase["base"]["lang"](a["default"]);l["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,l,i],a);a["run"]["init"]++};l["data"]=function(){fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,l,i],a);a["run"]["data"]++};l["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:"<input>",attr:{type:"text",id:a["id"],name:a["field"],placeholder:a["default"],autocomplete:"off"}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};l["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};l["echo"]=function(){a["echo"]=a["elem"].val();fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,l,i],a);if(a["echoSwitch"]==1&&a["require"]==1&&isBlank(a["echo"])){a["elem"].trigger("focus");layui.layer.msg(fxBase["base"]["lang"](["please","input",a["label"]]),{icon:5,anim:6});return false}a["run"]["echo"]++};l["reset"]=function(){a["elem"].val(a["data"]);fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,l,i],a);a["run"]["reset"]++};l["clean"]=function(){a["elem"].val("");fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,l,i],a);a["run"]["clean"]++};return l});fxView["machine"]["deployer"](["material","elem","date","skin","deploy"],{search:function(e,a,i,l){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-sm6 layui-col-md4"});e["wrap"].append(e["elem"]);e["elem"].attr({class:"layui-input"});e["plugin"]["elem"]=e["elem"][0];layui.laydate.render(e["plugin"])},view:function(e,a,i,l){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]+e["requireMark"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"layui-input"});e["plugin"]["elem"]=e["elem"][0];e["plugin"]=layui.laydate.render(e["plugin"]);e["elem"].on("blur",function(){l["value"]=$(this).val();l["regexp"]="[^A-Za-z]+";l["format"]=fxBase["text"]["explode"](l["regexp"],e["plugin"].config.format,"regular");l["regexp"]="[A-Za-z]+";l["format_separator"]=fxBase["text"]["explode"](l["regexp"],e["plugin"].config.format,"regular").slice(1,-1);l["regexp"]="[^0-9]+";l["value"]=fxBase["text"]["explode"](l["regexp"],l["value"],"regular").slice(0,l["format"].length);$.each(l["format"],function(e,a){l["value"][e]=fxBase["text"]["strPad"](!isBlank(l["value"][e])?l["value"][e]:"0",a.length,0,0)});$.each(l["format_separator"],function(e,a){l["value"][e]=l["value"][e]+a});l["value"]=fxBase["text"]["implode"]("",l["value"]);$(this).val(l["value"])})}});fxView["machine"]["deployer"](["material","elem","dateText","main"],function(){var e,a,i,l={};l["base"]=e={};l["dark"]=a={};l["tray"]=i={};l["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:0},a);a["title"]=fxBase["base"]["lang"](a["title"]);l["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,l,i],a);a["run"]["init"]++};l["data"]=function(){a["data"]=!isBlank(a["data"])?a["data"]:"暂无时间";fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,l,i],a);a["run"]["data"]++};l["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:"<div></div>",attr:{id:a["id"]}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};l["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};l["echo"]=function(){a["echo"]=a["elem"].text();fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,l,i],a);a["run"]["echo"]++};l["reset"]=function(){a["elem"].text(a["data"]);fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,l,i],a);a["run"]["reset"]++};l["clean"]=function(){fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,l,i],a);a["run"]["clean"]++};return l});fxView["machine"]["deployer"](["material","elem","dateText","skin","deploy"],{table:function(a,e,i,l){a["templet"]=function(e){l["data"]=fxBase["data"]["fieldParse"](e,a["field"]);a["list"].push(e);return!isBlank(l["data"])?l["data"]:"暂无时间"}},view:function(e,a,i,l){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"moire-div"})}});fxView["machine"]["deployer"](["material","elem","file","main"],function(){var e,a,i,l={};l["base"]=e={};l["dark"]=a={};l["tray"]=i={};l["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:1,default:["upload",a["title"]],alt:"",option:{type:null,panel:true},upload:{url:null,switch:true},delete:{url:null,switch:true,elem:"",text:["delete"]}},a);a["title"]=fxBase["base"]["lang"](a["title"]);a["default"]=fxBase["base"]["lang"](a["default"]);a["delete"]["text"]=fxBase["base"]["lang"](a["delete"]["text"]);l["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,l,i],a);a["run"]["init"]++};l["data"]=function(){if(isBlank(a["data"])){a["data"]=[]}else if(!isAorO(a["data"])){a["data"]=fxBase["text"]["explode"](",",a["data"])}fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,l,i],a);a["run"]["data"]++};l["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:'<div><div class="moire-elem-inline"></div></div>',attr:{id:a["id"]}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};l["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};l["echo"]=function(){if(!a["upload"]["switch"]&&!a["delete"]["switch"])return true;fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,l,i],a);if(a["echoSwitch"]==1&&a["require"]==1&&isBlank(a["echo"])){a["elem"].find(".moire-operate").trigger("click");layui.layer.msg(fxBase["base"]["lang"](["please","upload",a["label"]]),{icon:5,anim:6});return false}a["run"]["echo"]++};l["reset"]=function(){fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,l,i],a);a["run"]["reset"]++};l["clean"]=function(){fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,l,i],a);a["run"]["clean"]++};return l});fxView["machine"]["deployer"](["material","elem","file","skin","deploy"],{table:function(a,e,i,l){a["templet"]=function(e){l["data"]=fxBase["data"]["fieldParse"](e,a["field"]);a["list"].push(e);l["echo"]="";switch(a["option"]["type"]){default:case"file":case"video":case"image":if(!isBlank(l["data"])){l["echo"]=$("<img>");l["echo"].attr({src:l["data"],title:a["title"],style:"width: 100%;height: 100%"});l["echo"]=l["echo"].prop("outerHTML")}break}return l["echo"]}},view:function(t,e,a,l){e["pack"].append(t["wrap"]);t["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});t["wrap"].append('<div moire-key="'+t["type"]+'"></div><div moire-cell="'+t["type"]+'"></div>');t["wrap"].children("[moire-key]").html(t["label"]+t["requireMark"]);t["wrap"].children("[moire-cell]").append(t["elem"]);t["elem"].attr({class:"moire-div"});if(t["delete"]["switch"]){t["delete"]["elem"]='<button class="layui-btn layui-btn-sm layui-btn-danger moire-bg-red-light moire-delete" type="button">'+t["delete"]["text"]+"</button>";t["elem"].parents("div[moire-cell]").on("click",".moire-delete",function(){var a={};a["elem"]=$(this).parents(".moire-elem-inline>div");a["message"]=fxBase["base"]["lang"](["是否删除","[",t["title"],"]","项目","[",a["elem"].index()+1,"]","？"]);a["config"]={title:null,icon:0,closeBtn:0,shadeClose:true,success:function(e,a){l["layer.index"]=fxBase["text"]["implode"]("-",[$(e[0]).attr("times"),fxApp["rank"]["self.code"],"layui"]);fxApp["rank"]["self.layer.index.set"](l["layer.index"])},end:function(){fxApp["rank"]["self.layer.index.destroy"](l["layer.index"])}};layui.layer.confirm(a["message"],a["config"],function(e){a["data"]=fxBase["text"]["explode"](",",$("input[name="+t["field"]+"]").val());t["elem"].find(".moire-elem-inline").masonry("destroy",a["elem"]);a["data"].splice(a["elem"].index(),1);$("input[name="+t["field"]+"]").val(fxBase["text"]["implode"](",",a["data"]));a["elem"].remove();t["event"]["masonry"]();t["event"]["resize"]();fxApp["rank"]["self.layer.index.destroy"](l["layer.index"]);layui.layer.close(e)})})}if(t["upload"]["switch"]){t["elem"].append('<div class="moire-elem-operate">'+'<button type="button" class="layui-btn moire-operate">'+'<i class="layui-icon">&#xe67c;</i>'+fxBase["base"]["lang"](t["default"])+"</button>"+'<input type="hidden" class="moire-operate-hidden"></div>');t["elem"].find(".moire-operate").on("click",function(){if(!t["option"]["panel"]){t["elem"].find(".moire-operate-hidden").trigger("click");return false}layui.layer.prompt({title:"地址",btn:["保存","本地上传"],btn2:function(e,a){t["elem"].find(".moire-operate-hidden").trigger("click")},shadeClose:true,success:function(e,a){l["layer.index"]=fxBase["text"]["implode"]("-",[$(e[0]).attr("times"),fxApp["rank"]["self.code"],"layui"]);fxApp["rank"]["self.layer.index.set"](l["layer.index"])},end:function(){fxApp["rank"]["self.layer.index.destroy"](l["layer.index"])}},function(e,a,i){r({code:200,message:fxBase["base"]["lang"](["save","success"]),data:[e]});fxApp["rank"]["self.layer.index.destroy"](l["layer.index"]);layui.layer.close(a)})});t["upload"]=fxBase["param"]["merge"](t["upload"],{elem:t["elem"].find(".moire-operate-hidden"),data:{base:{token:fxApp["user"]["base"]["token"],format:"json"}},choose:i,before:n,done:r,error:o},t["upload"]);function i(e){}function n(e){fxApp["rank"]["file.load"]=layui.layer.load(2)}function r(e,a,i){var l={};t["elem"].find(".moire-elem-operate input").val("");layui.layer.close(fxApp["rank"]["file.load"]);l["data"]=fxBase["text"]["explode"](",",$("input[name="+t["field"]+"]").val());if(e["code"]==-1){e["message"]=fxBase["base"]["lang"](["system","abend"])}if(e["code"]==200){$.each(e["data"],function(e,a){l["data"].push(a);switch(t["option"]["type"]){default:case"file":case"video":t["elem"].find(".moire-elem-inline").append('<div><a href="'+a+'" target="_blank">点击链接</a>'+t["delete"]["elem"]+"</div>");break;case"image":t["elem"].find(".moire-elem-inline").append('<div><img src="'+a+'"'+t["alt"]+">"+t["delete"]["elem"]+"</div>");break}});l["list"]=[];$.each(l["data"],function(e,a){if(isBlank(a))return true;l["list"].push(a)});$("input[name="+t["field"]+"]").val(fxBase["text"]["implode"](",",l["list"]));layui.layer.msg(e["message"],{icon:1,time:800});t["elem"].find(".moire-elem-inline").masonry("appended",t["elem"].find(".moire-elem-inline>div:last"));t["elem"].find(".moire-elem-inline").imagesLoaded(function(){t["event"]["masonry"]()});t["elem"].parents("div[moire-cell]").viewer("update");t["event"]["resize"]()}else{layui.layer.msg(e["message"],{icon:2,time:2e3})}}function o(e,a){layui.layer.close(fxApp["rank"]["file.load"])}layui.upload.render(t["upload"])}t["event"]["masonry"]=function(){t["elem"].find(".moire-elem-inline").masonry({itemSelector:"div"})};t["event"]["resize"]=function(){t["elem"].find(".moire-elem-inline>div:first").off("resize");t["elem"].find(".moire-elem-inline>div:first").on("resize",function(){t["event"]["masonry"]()})};t["event"]["masonry"]()},view_alioss:function(t,e,a,n){e["pack"].append(t["wrap"]);t["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});t["wrap"].append('<div moire-key="'+t["type"]+'"></div><div moire-cell="'+t["type"]+'"></div>');t["wrap"].children("[moire-key]").html(t["label"]+t["requireMark"]);t["wrap"].children("[moire-cell]").append(t["elem"]);t["elem"].attr({class:"moire-div"});if(t["delete"]["switch"]){t["delete"]["elem"]='<button class="layui-btn layui-btn-sm layui-btn-danger moire-bg-red-light moire-delete" type="button">'+t["delete"]["text"]+"</button>";t["elem"].parents("div[moire-cell]").on("click",".moire-delete",function(){var a={};a["elem"]=$(this).parents(".moire-elem-inline>div");a["message"]=fxBase["base"]["lang"](["是否删除","[",t["title"],"]","项目","[",a["elem"].index()+1,"]","？"]);a["config"]={title:null,icon:0,closeBtn:0,shadeClose:true,success:function(e,a){n["layer.index"]=fxBase["text"]["implode"]("-",[$(e[0]).attr("times"),fxApp["rank"]["self.code"],"layui"]);fxApp["rank"]["self.layer.index.set"](n["layer.index"])},end:function(){fxApp["rank"]["self.layer.index.destroy"](n["layer.index"])}};layui.layer.confirm(a["message"],a["config"],function(e){a["data"]=fxBase["text"]["explode"](",",$("input[name="+t["field"]+"]").val());t["elem"].find(".moire-elem-inline").masonry("destroy",a["elem"]);a["data"].splice(a["elem"].index(),1);$("input[name="+t["field"]+"]").val(fxBase["text"]["implode"](",",a["data"]));a["elem"].remove();t["event"]["masonry"]();t["event"]["resize"]();fxApp["rank"]["self.layer.index.destroy"](n["layer.index"]);layui.layer.close(e)})})}if(t["upload"]["switch"]){t["elem"].append('<div class="moire-elem-operate">'+'<button type="button" class="layui-btn moire-operate">'+'<i class="layui-icon">&#xe67c;</i>'+fxBase["base"]["lang"](t["default"])+"</button>"+'<input type="hidden" class="moire-operate-hidden"></div>');t["elem"].find(".moire-operate").on("click",function(){if(!t["option"]["panel"]){n["message"]=["upload","success"];t["elem"].find(".moire-operate-hidden").trigger("click");return false}layui.layer.prompt({title:"地址",btn:["保存","本地上传"],btn2:function(e,a){n["message"]=["upload","success"];t["elem"].find(".moire-operate-hidden").trigger("click")},shadeClose:true,success:function(e,a){n["layer.index"]=fxBase["text"]["implode"]("-",[$(e[0]).attr("times"),fxApp["rank"]["self.code"],"layui"]);fxApp["rank"]["self.layer.index.set"](n["layer.index"])},end:function(){fxApp["rank"]["self.layer.index.destroy"](n["layer.index"])}},function(e,a,i){n["message"]=["save","success"];l([{ossUrl:e}]);fxApp["rank"]["self.layer.index.destroy"](n["layer.index"]);layui.layer.close(a)})});t["upload"]=fxBase["param"]["merge"](t["upload"],{elm:t["elem"].find(".moire-operate-hidden"),fileType:t["option"]["type"],multiple:false,layerArea:["600px","300px"],layerTitle:"上传文件",policyUrl:"/v0/file/aliossSign",policyData:{base:{token:fxApp["user"]["base"]["token"],format:"json"},data:{}},policyHeader:{Authorization:layui.data("XCORS").Authorization},codeFiled:"code",codeStatus:200,policyMethod:"get",accessidFiled:"accessid",policyFiled:"policy",signatureFiled:"signature",httpStr:"https",region:"oss-cn-hangzhou",bucket:"zzd-longwan",prefixPath:"moire/",allUploaded:l,policyFailed:i,uploadRenderData:{}},t["upload"]);function l(e,a,i){var l={};t["elem"].find(".moire-elem-operate input").val("");l["data"]=fxBase["text"]["explode"](",",$("input[name="+t["field"]+"]").val());$.each(e,function(e,a){l["data"].push(a["ossUrl"]);switch(t["option"]["type"]){default:case"file":case"video":t["elem"].find(".moire-elem-inline").append('<div><a href="'+a["ossUrl"]+'" target="_blank">点击链接</a>'+t["delete"]["elem"]+"</div>");break;case"image":t["elem"].find(".moire-elem-inline").append('<div><img src="'+a["ossUrl"]+'"'+t["alt"]+">"+t["delete"]["elem"]+"</div>");break}});l["list"]=[];$.each(l["data"],function(e,a){if(isBlank(a))return true;l["list"].push(a)});$("input[name="+t["field"]+"]").val(fxBase["text"]["implode"](",",l["list"]));layui.layer.msg(fxBase["base"]["lang"](n["message"]),{icon:1,time:800});t["elem"].find(".moire-elem-inline").masonry("appended",t["elem"].find(".moire-elem-inline>div:last"));t["elem"].find(".moire-elem-inline").imagesLoaded(function(){t["event"]["masonry"]()});t["elem"].parents("div[moire-cell]").viewer("update");t["event"]["resize"]()}function i(e,a){}layui.aliossUploader.render(t["upload"])}t["event"]["masonry"]=function(){t["elem"].find(".moire-elem-inline").masonry({itemSelector:"div"})};t["event"]["resize"]=function(){t["elem"].find(".moire-elem-inline>div:first").off("resize");t["elem"].find(".moire-elem-inline>div:first").on("resize",function(){t["event"]["masonry"]()})};t["event"]["masonry"]()}});fxView["machine"]["deployer"](["material","elem","file","skin","echo"],{"view,view_alioss":function(i,e,a,l){i["echo"]=[];i["elem"].find(".moire-elem-inline>div").each(function(e,a){switch(i["option"]["type"]){default:case"video":i["echo"].push($(a).find("a").attr("href"));break;case"image":i["echo"].push($(a).find("img").attr("src"));break}});i["echo"]=fxBase["text"]["implode"](",",i["echo"])}});fxView["machine"]["deployer"](["material","elem","file","skin","reset"],{"view,view_alioss":function(i,e,a,l){$.each(i["upload"]["data"],function(e,a){if(isJson(a))a=JSON.parse(a);i["upload"]["data"][e]=JSON.stringify(a)});i["elem"].find(".moire-elem-inline").masonry("destroy",i["elem"].find(".moire-elem-inline>div"));i["elem"].find(".moire-elem-inline>div").remove();$.each(i["data"],function(e,a){switch(i["option"]["type"]){default:case"file":case"video":i["elem"].find(".moire-elem-inline").append('<div><a href="'+a+'" target="_blank">点击链接</a>'+i["delete"]["elem"]+"</div>");break;case"image":i["elem"].find(".moire-elem-inline").append('<div><img src="'+a+'"'+i["alt"]+">"+i["delete"]["elem"]+"</div>");break}});i["elem"].find(".moire-elem-inline").imagesLoaded(function(){i["event"]["masonry"]()});i["event"]["masonry"]();i["elem"].parents("div[moire-cell]").viewer("update");i["event"]["resize"]()}});fxView["machine"]["deployer"](["material","elem","file","skin","clean"],{"view,view_alioss":function(e,a,i,l){e["elem"].find(".moire-elem-inline>div").remove();e["event"]["masonry"]()}});fxView["machine"]["deployer"](["material","elem","hidden","main"],function(){var e,a,i,l={};l["base"]=e={};l["dark"]=a={};l["tray"]=i={};l["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:1},a);a["title"]=fxBase["base"]["lang"](a["title"]);l["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,l,i],a);a["run"]["init"]++};l["data"]=function(){if(isArray(a["data"])){a["data"]=fxBase["text"]["implode"](",",a["data"])}else if(isObject(a["data"])){a["data"]=fxBase["text"]["implode"](",",Object.values(a["data"]))}fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,l,i],a);a["run"]["data"]++};l["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{elemBox:{elem:"<input>",attr:{type:"hidden",id:a["id"],name:a["field"]}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};l["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};l["echo"]=function(){a["echo"]=a["elem"].val();fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,l,i],a);if(a["echoSwitch"]==1&&a["require"]==1&&isBlank(a["echo"])){layui.layer.msg(fxBase["base"]["lang"](["please","input",a["label"]]),{icon:5,anim:6});return false}a["run"]["echo"]++};l["reset"]=function(){a["elem"].val(a["data"]);fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,l,i],a);a["run"]["reset"]++};l["clean"]=function(){a["elem"].val("");fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,l,i],a);a["run"]["clean"]++};return l});fxView["machine"]["deployer"](["material","elem","hidden","skin","deploy"],{"search,view":function(e,a,i,l){a["pack"].append(e["elem"])}});fxView["machine"]["deployer"](["material","elem","html","main"],function(){var e,a,i,l={};l["base"]=e={};l["dark"]=a={};l["tray"]=i={};l["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:0},a);a["title"]=fxBase["base"]["lang"](a["title"]);l["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,l,i],a);a["run"]["init"]++};l["data"]=function(){fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,l,i],a);a["run"]["data"]++};l["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:"<div></div>",attr:{id:a["id"]}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};l["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};l["echo"]=function(){a["echo"]=a["elem"].html();fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,l,i],a);a["run"]["echo"]++};l["reset"]=function(){a["elem"].html(a["data"]);fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,l,i],a);a["run"]["reset"]++};l["clean"]=function(){fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,l,i],a);a["run"]["clean"]++};return l});fxView["machine"]["deployer"](["material","elem","html","skin","deploy"],{view:function(e,a,i,l){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"moire-div"})}});fxView["machine"]["deployer"](["material","elem","input","main"],function(){var e,a,i,l={};l["base"]=e={};l["dark"]=a={};l["tray"]=i={};l["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:1,default:["input",a["title"]]},a);a["title"]=fxBase["base"]["lang"](a["title"]);a["default"]=fxBase["base"]["lang"](a["default"]);l["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,l,i],a);a["run"]["init"]++};l["data"]=function(){fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,l,i],a);a["run"]["data"]++};l["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:"<input>",attr:{type:"text",id:a["id"],name:a["field"],placeholder:a["default"],autocomplete:"off"}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};l["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};l["echo"]=function(){a["echo"]=a["elem"].val();fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,l,i],a);if(a["echoSwitch"]==1&&a["require"]==1&&isBlank(a["echo"])){a["elem"].trigger("focus");layui.layer.msg(fxBase["base"]["lang"](["please","input",a["label"]]),{icon:5,anim:6});return false}a["run"]["echo"]++};l["reset"]=function(){a["elem"].val(a["data"]);fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,l,i],a);a["run"]["reset"]++};l["clean"]=function(){a["elem"].val("");fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,l,i],a);a["run"]["clean"]++};return l});fxView["machine"]["deployer"](["material","elem","input","skin","deploy"],{search:function(e,a,i,l){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs6 layui-col-sm3 layui-col-md2"});e["wrap"].append(e["elem"]);e["elem"].attr({class:"layui-input"})},view:function(e,a,i,l){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]+e["requireMark"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"layui-input"})}});fxView["machine"]["deployer"](["material","elem","password","main"],function(){var e,a,i,l={};l["base"]=e={};l["dark"]=a={};l["tray"]=i={};l["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:1,default:["input",a["title"]]},a);a["title"]=fxBase["base"]["lang"](a["title"]);a["default"]=fxBase["base"]["lang"](a["default"]);l["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,l,i],a);a["run"]["init"]++};l["data"]=function(){fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,l,i],a);a["run"]["data"]++};l["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:"<input>",attr:{type:"password",id:a["id"],name:a["field"],placeholder:a["default"],autocomplete:"off"}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};l["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};l["echo"]=function(){a["echo"]=a["elem"].val();fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,l,i],a);if(a["echoSwitch"]==1&&a["require"]==1&&isBlank(a["echo"])){a["elem"].trigger("focus");layui.layer.msg(fxBase["base"]["lang"](["please","input",a["label"]]),{icon:5,anim:6});return false}a["run"]["echo"]++};l["reset"]=function(){a["elem"].val(a["data"]);fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,l,i],a);a["run"]["reset"]++};l["clean"]=function(){a["elem"].val("");fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,l,i],a);a["run"]["clean"]++};return l});fxView["machine"]["deployer"](["material","elem","password","skin","deploy"],{view:function(e,a,i,l){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]+e["requireMark"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"layui-input"})}});fxView["machine"]["deployer"](["material","elem","richtext","main"],function(){var e,a,i,l={};l["base"]=e={};l["dark"]=a={};l["tray"]=i={};l["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:1,default:["input",a["title"]],plugin:{lang:fxApp["view"]["lang"]}},a);a["title"]=fxBase["base"]["lang"](a["title"]);a["default"]=fxBase["base"]["lang"](a["default"]);l["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,l,i],a);a["run"]["init"]++};l["data"]=function(){fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,l,i],a);a["run"]["data"]++};l["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:"<textarea></textarea>",attr:{type:"text",id:a["id"],name:a["field"],placeholder:a["default"],autocomplete:"off"}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};l["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};l["echo"]=function(){if(fxBase["param"]["inArray"](fxApp["env"]["ie"],[-1,11])){a["echo"]=tinymce.get(a["id"]).getContent();a["elem"].val(a["echo"])}else{a["echo"]=a["elem"].val()}fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,l,i],a);if(a["echoSwitch"]==1&&a["require"]==1&&isBlank(a["echo"])){if(fxBase["param"]["inArray"](fxApp["env"]["ie"],[-1,11])){tinymce.get(a["id"]).focus()}else{a["elem"].trigger("focus")}layui.layer.msg(fxBase["base"]["lang"](["please","input",a["label"]]),{icon:5,anim:6});return false}a["run"]["echo"]++};l["reset"]=function(){$(document).ready(function(){if(fxBase["param"]["inArray"](fxApp["env"]["ie"],[-1,11])){tinymce.get(a["id"]).setContent(a["data"])}a["elem"].val(a["data"]);fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,l,i],a)});a["run"]["reset"]++};l["clean"]=function(){$(document).ready(function(){if(fxBase["param"]["inArray"](fxApp["env"]["ie"],[-1,11])){tinymce.get(a["id"]).setContent("")}a["elem"].val("");fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,l,i],a)});a["run"]["clean"]++};return l});fxView["machine"]["deployer"](["material","elem","richtext","skin","deploy"],{view:function(e,a,i,l){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]+e["requireMark"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"layui-textarea"});if(fxBase["param"]["inArray"](fxApp["env"]["ie"],[-1,11])){var i={};switch(e["plugin"]["lang"]){default:case"zh-cn":i["lang"]="zh_CN";break;case"en-us":i["lang"]="en_US";break}tinymce.init({selector:"#"+e["id"],language:i["lang"],mobile:{toolbar_drawer:false},plugins:"print preview searchreplace autolink directionality visualblocks visualchars fullscreen image link media template code codesample table charmap hr pagebreak nonbreaking anchor insertdatetime advlist lists wordcount imagetools textpattern help emoticons autosave bdmap indent2em lineheight axupimgs",toolbar:["code undo redo restoredraft | cut copy paste pastetext | forecolor backcolor bold italic underline strikethrough link anchor | alignleft aligncenter alignright alignjustify outdent indent | "+"styleselect formatselect fontselect fontsizeselect | bullist numlist | blockquote subscript superscript removeformat | "+"table image media charmap emoticons hr pagebreak insertdatetime print preview | fullscreen | bdmap indent2em lineheight axupimgs"],height:600,resize:false,fontsize_formats:"12px 14px 16px 18px 24px 36px 48px 56px 72px",font_formats:"微软雅黑=Microsoft YaHei,Helvetica Neue,PingFang SC,sans-serif;苹果苹方=PingFang SC,Microsoft YaHei,sans-serif;宋体=simsun,serif;仿宋体=FangSong,serif;黑体=SimHei,sans-serif;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;",images_upload_handler:function(e,a,i){var l=new FormData;var t=e.blob();l.append("base[token]",fxApp["user"]["base"]["token"]);l.append("file",t,t.name);$.ajax({type:"POST",url:"/v0/file/fileUpload",data:l,processData:false,contentType:false,success:n,error:r});function n(e){if(e["code"]==200){a(e["data"][0])}else{i(e["message"])}}function r(e){i(e["responseText"])}},autosave_ask_before_unload:false,init_instance_callback:function(e){}})}}});fxView["machine"]["deployer"](["material","elem","select","main"],function(){var e,i,a,l={};l["base"]=e={};l["dark"]=i={};l["tray"]=a={};l["init"]=function(){fxView["machine"]["darker"](i,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});i=fxBase["param"]["merge"](i,{echoSwitch:1,default:["choice",i["title"]],defaultValue:0},i);i["title"]=fxBase["base"]["lang"](i["title"]);i["default"]=fxBase["base"]["lang"](i["default"]);l["data"]();fxView["machine"]["caller"](["skins","init",i["skin"]],[i,e,l,a],i);i["run"]["init"]++};l["data"]=function(){if(isBlank(i["shelf"]["data"])){i["shelf"]["data"]={}}else if(!isAorO(i["shelf"]["data"])){i["shelf"]["data"]=fxBase["text"]["explode"](",",i["shelf"]["data"])}fxView["machine"]["caller"](["skins","data",i["skin"]],[i,e,l,a],i);i["run"]["data"]++};l["deploy"]=function(){if(i["run"]["deploy"])return;i=fxBase["param"]["merge"](i,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":i["type"],"moire-skin":i["skin"]}},elemBox:{elem:"<select></select>",attr:{id:i["id"],name:i["field"]}}},i);fxView["machine"]["caller"](["before"],[i,e],i);i["wrap"]=$(i["wrapBox"]["elem"]);i["wrap"].attr(i["wrapBox"]["attr"]);i["elem"]=$(i["elemBox"]["elem"]);i["elem"].attr(i["elemBox"]["attr"]);i["elem"].append('<option value="">'+i["default"]+"</option>");$.each(i["shelf"]["data"],function(e,a){i["elem"].append('<option value="'+e+'">'+a+"</option>")});fxView["machine"]["caller"](["skins","deploy",i["skin"]],[i,e,l,a],i);fxView["machine"]["caller"](["after"],[i,e],i);i["run"]["deploy"]++};l["done"]=function(){fxView["machine"]["caller"](["skins","done",i["skin"]],[i,e,l,a],i);fxView["machine"]["caller"](["done"],[i,e],i);i["run"]["done"]++};l["echo"]=function(){i["echo"]=i["elem"].val();fxView["machine"]["caller"](["skins","echo",i["skin"]],[i,e,l,a],i);if(i["echoSwitch"]==1&&i["require"]==1&&isBlank(i["echo"])){i["elem"].parents("[moire-cell]").find("input").trigger("click");layui.layer.msg(fxBase["base"]["lang"](["please","choice",i["label"]]),{icon:5,anim:6});return false}i["run"]["echo"]++};l["reset"]=function(){i["elem"].val(i["data"]);i["elem"].next().find("input").val(i["elem"].find("option:selected").html());fxView["machine"]["caller"](["skins","reset",i["skin"]],[i,e,l,a],i);i["run"]["reset"]++};l["clean"]=function(){i["elem"].val("");fxView["machine"]["caller"](["skins","clean",i["skin"]],[i,e,l,a],i);i["run"]["clean"]++};return l});fxView["machine"]["deployer"](["material","elem","select","skin","deploy"],{search:function(e,a,i,l){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs6 layui-col-sm3 layui-col-md2"});e["wrap"].append(e["elem"])},view:function(e,a,i,l){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]+e["requireMark"]);e["wrap"].children("[moire-cell]").append(e["elem"])}});fxView["machine"]["deployer"](["material","elem","select","skin","echo"],{view:function(e,a,i,l){e["echo"]=e["require"]==1||!isBlank(e["echo"])?e["echo"]:e["defaultValue"]}});fxView["machine"]["deployer"](["material","elem","selected","main"],function(){var e,a,i,l={};l["base"]=e={};l["dark"]=a={};l["tray"]=i={};l["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:0,option:{url:null,param:function(e,a){var i={data:{}};i["data"][e]=fxBase["data"]["fieldParse"](a,e);return i},class:a["id"]+"-elem"}},a);a["title"]=fxBase["base"]["lang"](a["title"]);l["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,l,i],a);a["run"]["init"]++};l["data"]=function(){if(isBlank(a["shelf"]["data"])){a["shelf"]["data"]={}}else if(!isAorO(a["shelf"]["data"])){a["shelf"]["data"]=fxBase["text"]["explode"](",",a["shelf"]["data"])}fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,l,i],a);a["run"]["data"]++};l["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:"<div></div>",attr:{id:a["id"]}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};l["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};l["echo"]=function(){a["echo"]=a["data"];fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,l,i],a);a["run"]["echo"]++};l["reset"]=function(){a["elem"].html(!isBlank(a["shelf"]["data"][a["data"]])?a["shelf"]["data"][a["data"]]:"");fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,l,i],a);a["run"]["reset"]++};l["clean"]=function(){fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,l,i],a);a["run"]["clean"]++};return l});fxView["machine"]["deployer"](["material","elem","selected","skin","deploy"],{table:function(a,e,i,l){a["templet"]=function(e){l["data"]=fxBase["data"]["fieldParse"](e,a["field"]);a["list"].push(e);return!isBlank(a["shelf"]["data"][l["data"]])?a["shelf"]["data"][l["data"]]:""}},table_link:function(a,e,i,l){a["wrapBox"]["attr"]["moire-elem"]="link";a["templet"]=function(e){l["data"]=fxBase["data"]["fieldParse"](e,a["field"]);a["list"].push(e);l["echo"]="";l["url"]=fxBase["param"]["url"]({type:"1.1",url:a["option"]["url"],param:a["option"]["param"](a["field"],e)});if(!isBlank(a["shelf"]["data"][l["data"]])){l["attr"]={"fxy-href":l["url"],title:a["title"]};l["echo"]=$("<a><div></div></a>");l["echo"].attr(l["attr"]);l["attr"]={class:a["option"]["class"]};l["echo"].find("div").attr(l["attr"]).text(a["shelf"]["data"][l["data"]]);l["echo"]=l["echo"].prop("outerHTML")}return l["echo"]}},view:function(e,a,i,l){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"moire-div"})}});fxView["machine"]["deployer"](["material","elem","selects","main"],function(){var e,i,a,l={};l["base"]=e={};l["dark"]=i={};l["tray"]=a={};l["init"]=function(){fxView["machine"]["darker"](i,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});i=fxBase["param"]["merge"](i,{echoSwitch:1,default:["choice",i["title"]],defaultValue:0,plugin:{radio:false},option:{height:"36px",search:"",searchType:"dl"}},i);i["title"]=fxBase["base"]["lang"](i["title"]);i["default"]=fxBase["base"]["lang"](i["default"]);l["data"]();fxView["machine"]["caller"](["skins","init",i["skin"]],[i,e,l,a],i);i["run"]["init"]++};l["data"]=function(){if(isBlank(i["data"])){i["data"]=[]}else if(!isAorO(i["data"])){i["data"]=fxBase["text"]["explode"](",",i["data"])}if(isBlank(i["shelf"]["data"])){i["shelf"]["data"]={}}else if(!isAorO(i["shelf"]["data"])){i["shelf"]["data"]=fxBase["text"]["explode"](",",i["shelf"]["data"])}fxView["machine"]["caller"](["skins","data",i["skin"]],[i,e,l,a],i);i["run"]["data"]++};l["deploy"]=function(){if(i["run"]["deploy"])return;i=fxBase["param"]["merge"](i,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":i["type"],"moire-skin":i["skin"]}},elemBox:{elem:"<select "+(i["plugin"]["radio"]?" xm-select-radio":"")+"></select>",attr:{id:i["id"],name:i["field"]}}},i);fxView["machine"]["caller"](["before"],[i,e],i);i["wrap"]=$(i["wrapBox"]["elem"]);i["wrap"].attr(i["wrapBox"]["attr"]);i["elem"]=$(i["elemBox"]["elem"]);i["elem"].attr(i["elemBox"]["attr"]);i["elem"].append('<option value="">'+i["default"]+"</option>");if(isBlank(i["option"]["search"])){$.each(i["shelf"]["data"],function(e,a){i["elem"].append('<option value="'+e+'">'+a+"</option>")})}fxView["machine"]["caller"](["skins","deploy",i["skin"]],[i,e,l,a],i);fxView["machine"]["caller"](["after"],[i,e],i);i["run"]["deploy"]++};l["done"]=function(){fxView["machine"]["caller"](["skins","done",i["skin"]],[i,e,l,a],i);fxView["machine"]["caller"](["done"],[i,e],i);i["run"]["done"]++};l["echo"]=function(){i["echo"]=layui.formSelects.value(i["field"],"valStr");fxView["machine"]["caller"](["skins","echo",i["skin"]],[i,e,l,a],i);if(i["echoSwitch"]==1&&i["require"]==1&&isBlank(i["echo"])){i["elem"].parents("[moire-cell]").find(".xm-select-label").trigger("click");layui.layer.msg(fxBase["base"]["lang"](["please","choice",i["label"]]),{icon:5,anim:6});return false}i["run"]["echo"]++};l["reset"]=function(){layui.formSelects.value(i["field"],i["data"]);fxView["machine"]["caller"](["skins","reset",i["skin"]],[i,e,l,a],i);i["run"]["reset"]++};l["clean"]=function(){layui.formSelects.value(i["field"],[]);fxView["machine"]["caller"](["skins","clean",i["skin"]],[i,e,l,a],i);i["run"]["clean"]++};return l});fxView["machine"]["deployer"](["material","elem","selects","skin","deploy"],{search:function(e,a,i,l){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs6 layui-col-sm3 layui-col-md2"});e["wrap"].append(e["elem"]);e["elem"].attr({"xm-select":e["field"],"xm-select-height":e["option"]["height"],"xm-select-search":e["option"]["search"],"xm-select-search-type":e["option"]["searchType"]});fxView["layui"]["init"]({type:"select",id:e["field"],plugin:e["plugin"]});layui.formSelects.value(e["field"],e["data"])},view:function(e,a,i,l){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]+e["requireMark"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({"xm-select":e["field"],"xm-select-height":e["option"]["height"],"xm-select-search":e["option"]["search"],"xm-select-search-type":e["option"]["searchType"]});fxView["layui"]["init"]({type:"select",id:e["field"],plugin:e["plugin"]});layui.formSelects.value(e["field"],e["data"])}});fxView["machine"]["deployer"](["material","elem","selects","skin","echo"],{view:function(e,a,i,l){e["echo"]=e["require"]==1||!isBlank(e["echo"])?e["echo"]:e["defaultValue"]}});fxView["machine"]["deployer"](["material","elem","switch","main"],function(){var e,a,i,l={};l["base"]=e={};l["dark"]=a={};l["tray"]=i={};l["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:1},a);a["title"]=fxBase["base"]["lang"](a["title"]);l["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,l,i],a);a["run"]["init"]++};l["data"]=function(){if(isBlank(a["shelf"]["data"])){a["shelf"]["data"]={}}else if(!isAorO(a["shelf"]["data"])){a["shelf"]["data"]=fxBase["text"]["explode"](",",a["shelf"]["data"])}a["shelf"]["dataEcho"]=fxBase["text"]["implode"]("|",Object.values(a["shelf"]["data"]).reverse());fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,l,i],a);a["run"]["data"]++};l["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:"<input>",attr:{type:"checkbox",id:a["id"],name:a["field"],"lay-skin":"switch","lay-text":a["shelf"]["dataEcho"]}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};l["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};l["echo"]=function(){a["echo"]=a["elem"].prop("checked")?1:0;fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,l,i],a);a["run"]["echo"]++};l["reset"]=function(){a["elem"].prop("checked",!!parseInt(a["data"]));fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,l,i],a);a["run"]["reset"]++};l["clean"]=function(){a["elem"].prop("checked",false);fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,l,i],a);a["run"]["clean"]++};return l});fxView["machine"]["deployer"](["material","elem","switch","skin","deploy"],{table:function(a,i,e,l){a["templet"]=function(e){l["data"]=fxBase["data"]["fieldParse"](e,a["field"]);a["list"].push(e);l["echo"]="";if(!isBlank(a["shelf"]["data"][l["data"]])){l["echo"]=$("<input>");l["echo"].attr({type:"checkbox",name:a["field"],value:e[i["mould"]["base"]["model"]["key"]],"lay-skin":"switch","lay-text":a["shelf"]["dataEcho"],"lay-filter":a["field"],checked:l["data"]==1?"checked":null});l["echo"].text(a["shelf"]["data"][l["data"]]);l["echo"]=l["echo"].prop("outerHTML")}return l["echo"]}},view:function(e,a,i,l){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]+e["requireMark"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"layui-input"})}});fxView["machine"]["deployer"](["material","elem","table","main"],function(){var e,t,n,a={};a["base"]=e={};a["dark"]=t={};a["tray"]=n={};a["init"]=function(){fxView["machine"]["darker"](t,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});t=fxBase["param"]["merge"](t,{echoSwitch:1,default:["add",t["title"]],plugin:{group:{name:t["id"]},animation:150,filter:".moire-delete"},add:{switch:true,disabled:"disabled"},delete:{switch:true,elem:"",width:"0px",text:["delete"]}},t);t["title"]=fxBase["base"]["lang"](t["title"]);t["default"]=fxBase["base"]["lang"](t["default"]);t["delete"]["text"]=fxBase["base"]["lang"](t["delete"]["text"]);a["data"]();fxView["machine"]["caller"](["skins","init",t["skin"]],[t,e,a,n],t);t["run"]["init"]++};a["data"]=function(){if(isBlank(t["data"])){t["data"]=[]}else if(isJson(t["data"])){t["data"]=JSON.parse(t["data"])}else if(!isAorO(t["data"])){t["data"]=fxBase["text"]["explode"](",",t["data"])}if(isBlank(t["shelf"]["data"])){t["shelf"]["data"]={}}else if(!isAorO(t["shelf"]["data"])){t["shelf"]["data"]=fxBase["text"]["explode"](",",t["shelf"]["data"])}fxView["machine"]["caller"](["skins","data",t["skin"]],[t,e,a,n],t);t["run"]["data"]++};a["deploy"]=function(){if(t["run"]["deploy"])return;t=fxBase["param"]["merge"](t,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":t["type"],"moire-skin":t["skin"]}},elemBox:{elem:'<div><div class="moire-elem-inline"></div></div>',attr:{id:t["id"]}}},t);fxView["machine"]["caller"](["before"],[t,e],t);t["wrap"]=$(t["wrapBox"]["elem"]);t["wrap"].attr(t["wrapBox"]["attr"]);t["elem"]=$(t["elemBox"]["elem"]);t["elem"].attr(t["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",t["skin"]],[t,e,a,n],t);fxView["machine"]["caller"](["after"],[t,e],t);t["run"]["deploy"]++};a["done"]=function(){fxView["machine"]["caller"](["skins","done",t["skin"]],[t,e,a,n],t);fxView["machine"]["caller"](["done"],[t,e],t);t["run"]["done"]++};a["echo"]=function(){if(!t["add"]["switch"]&&!t["delete"]["switch"])return true;t["echo"]=[];fxView["machine"]["caller"](["skins","echo",t["skin"]],[t,e,a,n],t);if(t["echoSwitch"]==1&&t["require"]==1&&isEmpty(t["echo"])){layui.layer.msg(fxBase["base"]["lang"](["please","add",t["label"]]),{icon:5,anim:6});return false}t["run"]["echo"]++};a["reset"]=function(){t["elem"].find(".moire-elem-inline>div").remove();$.each(t["data"],function(e,i){var l=$('<div class="moire-clear"></div>');$.each(t["shelf"]["data"],function(e,a){if(true===a["self"]&&t["skin"]=="view_row"){n["value"]=i}else if(true===a["self"]){n["value"]={};n["value"][a["field"]]=i[a["field"]]}else{n["value"]=i[a["field"]]}if(!isString(n["value"])){n["value"]=JSON.stringify(n["value"])}l.append('<input type="text" class="layui-input" moire-type="'+a["field"]+'"'+' placeholder="'+fxBase["base"]["lang"](a["title"])+'" autocomplete="off">');l.find("[moire-type="+a["field"]+"]").attr({disabled:t["add"]["disabled"],style:a["style"]}).css("width",a["width"]).val(n["value"])});l.append(t["delete"]["elem"]);t["elem"].find(".moire-elem-inline").append(l)});fxView["machine"]["caller"](["skins","reset",t["skin"]],[t,e,a,n],t);t["run"]["reset"]++};a["clean"]=function(){t["elem"].find(".moire-elem-inline>div").remove();fxView["machine"]["caller"](["skins","clean",t["skin"]],[t,e,a,n],t);t["run"]["clean"]++};return a});fxView["machine"]["deployer"](["material","elem","table","skin","deploy"],{table:function(a,e,i,t){a["templet"]=function(e){t["data"]=fxBase["data"]["fieldParse"](e,a["field"]);a["list"].push(e);t["echo"]=[];if(isBlank(t["data"])){t["data"]=[]}else if(isJson(t["data"])){t["data"]=JSON.parse(t["data"])}else if(!isAorO(t["data"])){t["data"]=fxBase["text"]["explode"](",",t["data"])}$.each(t["data"],function(i,l){if(!isAorO(l))return true;t["echo"][i]=[];$.each(a["shelf"]["data"],function(e,a){t["echo"][i].push(l[a["field"]])});t["echo"][i]=fxBase["text"]["implode"](fxBase["base"]["lang"](":"),t["echo"][i])});t["echo"]=fxBase["text"]["implode"](fxBase["base"]["lang"]("|"),t["echo"]);return t["echo"]}},table_row:function(a,e,i,l){a["templet"]=function(e){l["data"]=fxBase["data"]["fieldParse"](e,a["field"]);a["list"].push(e);l["echo"]=[];if(isBlank(l["data"])){l["data"]=[]}else if(isJson(l["data"])){l["data"]=JSON.parse(l["data"])}else if(!isAorO(l["data"])){l["data"]=fxBase["text"]["explode"](",",l["data"])}$.each(l["data"],function(e,a){l["echo"].push(a)});l["echo"]=fxBase["text"]["implode"](fxBase["base"]["lang"]("|"),l["echo"]);return l["echo"]}},view:function(e,a,i,l){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]+e["requireMark"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"moire-div"});e["elem"].find(".moire-elem-inline").attr({name:e["field"]});if(e["delete"]["switch"]){e["delete"]["elem"]='<button class="layui-btn layui-btn-sm layui-btn-danger moire-bg-red-light moire-delete" type="button">'+e["delete"]["text"]+"</button>";e["delete"]["width"]="80px";e["elem"].parents("div[moire-cell]").on("click",".moire-delete",function(){var a={};a["elem"]=$(this).parents(".moire-elem-inline>div");a["message"]=fxBase["base"]["lang"](["是否删除","[",e["title"],"]","选项","[",a["elem"].index()+1,"]","？"]);a["config"]={title:null,icon:0,closeBtn:0,shadeClose:true,success:function(e,a){l["layer.index"]=fxBase["text"]["implode"]("-",[$(e[0]).attr("times"),fxApp["rank"]["self.code"],"layui"]);fxApp["rank"]["self.layer.index.set"](l["layer.index"])},end:function(){fxApp["rank"]["self.layer.index.destroy"](l["layer.index"])}};layui.layer.confirm(a["message"],a["config"],function(e){a["elem"].remove();fxApp["rank"]["self.layer.index.destroy"](l["layer.index"]);layui.layer.close(e)})})}if(e["add"]["switch"]){e["add"]["disabled"]=null}l["width"]=[e["delete"]["width"]];l["count"]=0;$.each(e["shelf"]["data"],function(e,a){if(!isBlank(a["width"])){l["width"].push(a["width"])}else{l["count"]++}});l["width"]=fxBase["text"]["implode"](" - ",l["width"]);$.each(e["shelf"]["data"],function(e,a){if(isBlank(a["width"])){a["width"]="calc((100% - "+l["width"]+") / "+l["count"]+")"}});if(e["add"]["switch"]){e["elem"].append('<div class="moire-elem-operate">'+'<button type="button" class="layui-btn moire-operate" id="'+e["id"]+'">'+fxBase["base"]["lang"](e["default"])+"</button></div>");e["elem"].parents("div[moire-cell]").on("click",".moire-operate",function(){var i=$('<div class="moire-clear"></div>');$.each(e["shelf"]["data"],function(e,a){i.append('<input type="text" class="layui-input" moire-type="'+a["field"]+'"'+' placeholder="'+fxBase["base"]["lang"](a["title"])+'" autocomplete="off">');i.find("[moire-type="+a["field"]+"]").attr({style:a["style"]}).css("width",a["width"])});i.append(e["delete"]["elem"]);e["elem"].find(".moire-elem-inline").append(i)});e["plugin"]["echo"]=new Sortable(e["elem"].find(".moire-elem-inline")[0],e["plugin"])}},view_row:function(e,a,i,l){fxView["material"]["elem"]["table"]["skin"]["deploy"]["view"](e,a,i,l)}});fxView["machine"]["deployer"](["material","elem","table","skin","echo"],{view:function(l,e,a,t){$(l["plugin"]["echo"].el).children().each(function(i,e){l["echo"][i]={};$(e).children("input").each(function(e,a){if(true===l["shelf"]["data"][e]["self"]){t["value"]=$(a).val();if(!isJson(t["value"])){t["value"]="{}"}t["value"]=JSON.parse(t["value"]);l["echo"][i]=fxBase["param"]["merge"](l["echo"][i],t["value"])}else{l["echo"][i][$(a).attr("moire-type")]=$(a).val()}})})},view_row:function(i,e,a,l){$(i["plugin"]["echo"].el).children().each(function(e,a){$(a).children("input").each(function(e,a){i["echo"].push($(a).val())})})}});fxView["machine"]["deployer"](["material","elem","text","main"],function(){var e,a,i,l={};l["base"]=e={};l["dark"]=a={};l["tray"]=i={};l["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:0,option:{url:null,param:function(e,a){var i={data:{}};i["data"][e]=fxBase["data"]["fieldParse"](a,e);return i},class:a["id"]+"-elem",text:["click","jump"],target:"_blank"}},a);a["title"]=fxBase["base"]["lang"](a["title"]);a["option"]["text"]=fxBase["base"]["lang"](a["option"]["text"]);l["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,l,i],a);a["run"]["init"]++};l["data"]=function(){fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,l,i],a);a["run"]["data"]++};l["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:"<div></div>",attr:{id:a["id"]}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};l["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};l["echo"]=function(){a["echo"]=a["elem"].text();fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,l,i],a);a["run"]["echo"]++};l["reset"]=function(){a["elem"].text(a["data"]+a["dataSuffix"]);fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,l,i],a);a["run"]["reset"]++};l["clean"]=function(){fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,l,i],a);a["run"]["clean"]++};return l});fxView["machine"]["deployer"](["material","elem","text","skin","deploy"],{table:function(a,e,i,l){a["templet"]=function(e){l["data"]=fxBase["data"]["fieldParse"](e,a["field"]);a["list"].push(e);return!isBlank(l["data"])?l["data"]+a["dataSuffix"]:""}},table_link:function(a,e,i,l){a["wrapBox"]["attr"]["moire-elem"]="link";a["templet"]=function(e){l["data"]=fxBase["data"]["fieldParse"](e,a["field"]);a["list"].push(e);l["echo"]="";if(!isBlank(a["option"]["url"])){l["href"]="fxy-href";l["url"]=fxBase["param"]["url"]({type:"1.2",url:a["option"]["url"],param:a["option"]["param"](a["field"],e)})}else{l["href"]="href";l["url"]=l["data"]}if(!isBlank(l["url"])){l["attr"]={title:a["title"],target:a["option"]["target"]};l["attr"][l["href"]]=l["url"];l["echo"]=$("<a><div></div></a>");l["echo"].attr(l["attr"]);l["attr"]={class:a["option"]["class"]};l["echo"].find("div").attr(l["attr"]).text(a["option"]["text"]);l["echo"]=l["echo"].prop("outerHTML")}return l["echo"]}},view:function(e,a,i,l){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"moire-div"})}});fxView["machine"]["deployer"](["material","elem","textarea","main"],function(){var e,a,i,l={};l["base"]=e={};l["dark"]=a={};l["tray"]=i={};l["init"]=function(){fxView["machine"]["darker"](a,arguments[0]);e=fxBase["param"]["merge"](e,{},isObject(arguments[1])?arguments[1]:{});a=fxBase["param"]["merge"](a,{echoSwitch:1,default:["input",a["title"]]},a);a["title"]=fxBase["base"]["lang"](a["title"]);a["default"]=fxBase["base"]["lang"](a["default"]);l["data"]();fxView["machine"]["caller"](["skins","init",a["skin"]],[a,e,l,i],a);a["run"]["init"]++};l["data"]=function(){fxView["machine"]["caller"](["skins","data",a["skin"]],[a,e,l,i],a);a["run"]["data"]++};l["deploy"]=function(){if(a["run"]["deploy"])return;a=fxBase["param"]["merge"](a,{wrapBox:{elem:"<div></div>",attr:{"moire-elem":"elem","moire-type":a["type"],"moire-skin":a["skin"]}},elemBox:{elem:"<textarea></textarea>",attr:{type:"text",id:a["id"],name:a["field"],placeholder:a["default"],autocomplete:"off"}}},a);fxView["machine"]["caller"](["before"],[a,e],a);a["wrap"]=$(a["wrapBox"]["elem"]);a["wrap"].attr(a["wrapBox"]["attr"]);a["elem"]=$(a["elemBox"]["elem"]);a["elem"].attr(a["elemBox"]["attr"]);fxView["machine"]["caller"](["skins","deploy",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["after"],[a,e],a);a["run"]["deploy"]++};l["done"]=function(){fxView["machine"]["caller"](["skins","done",a["skin"]],[a,e,l,i],a);fxView["machine"]["caller"](["done"],[a,e],a);a["run"]["done"]++};l["echo"]=function(){a["echo"]=a["elem"].val();fxView["machine"]["caller"](["skins","echo",a["skin"]],[a,e,l,i],a);if(a["echoSwitch"]==1&&a["require"]==1&&isBlank(a["echo"])){a["elem"].trigger("focus");layui.layer.msg(fxBase["base"]["lang"](["please","input",a["label"]]),{icon:5,anim:6});return false}a["run"]["echo"]++};l["reset"]=function(){a["elem"].val(a["data"]);fxView["machine"]["caller"](["skins","reset",a["skin"]],[a,e,l,i],a);a["run"]["reset"]++};l["clean"]=function(){a["elem"].val("");fxView["machine"]["caller"](["skins","clean",a["skin"]],[a,e,l,i],a);a["run"]["clean"]++};return l});fxView["machine"]["deployer"](["material","elem","textarea","skin","deploy"],{view:function(e,a,i,l){a["pack"].append(e["wrap"]);e["wrap"].attr({class:"layui-col-xs12 layui-col-md6"});e["wrap"].append('<div moire-key="'+e["type"]+'"></div><div moire-cell="'+e["type"]+'"></div>');e["wrap"].children("[moire-key]").html(e["label"]+e["requireMark"]);e["wrap"].children("[moire-cell]").append(e["elem"]);e["elem"].attr({class:"layui-textarea"})}});fxView["machine"]["deployer"](["material","template","tool"],{tips:"","tips-text":"<textarea readonly></textarea>","view-search":""+'<button moire-cell="submit" class="layui-btn moire-bg-green-light moire-submit" lay-filter="moire-submit" lay-submit>search</button>'+'<button moire-cell="reset" class="layui-btn layui-btn-primary moire-reset" type="button">reset</button>'+'<button moire-cell="clear" class="layui-btn layui-btn-primary moire-clean" type="button">clear</button>'+'<button moire-cell="switch" class="layui-btn layui-btn-primary moire-switch" type="button">fold</button>',"view-edit":""+'<button moire-cell="submit" class="layui-btn layui-btn-sm moire-bg-green-light moire-submit" lay-filter="moire-submit" lay-submit>save</button>'+'<button moire-cell="reset" class="layui-btn layui-btn-sm layui-btn-primary moire-reset" type="button">reset</button>'+'<button moire-cell="clear" class="layui-btn layui-btn-sm layui-btn-primary moire-clean" type="button">clear</button>'+'<button moire-cell="close" class="layui-btn layui-btn-sm layui-btn-danger moire-bg-red-light moire-close" type="button">close</button>',"table-head":""+'<button moire-cell="add" class="layui-btn layui-btn-sm moire-bg-green-light" lay-event="add">add</button>'+'<button moire-cell="delete" class="layui-btn layui-btn-sm layui-btn-danger moire-bg-red-light" lay-event="delete">delete</button>'+'<button moire-cell="import" class="layui-btn layui-btn-sm layui-btn-primary" lay-event="import">import</button>'+'<button moire-cell="export" class="layui-btn layui-btn-sm layui-btn-primary" lay-event="export">export</button>'+'<button moire-cell="upload" class="layui-btn layui-btn-sm layui-btn-primary" lay-event="upload">upload</button>'+'<button moire-cell="download" class="layui-btn layui-btn-sm layui-btn-primary" lay-event="download">download</button>'+'<button moire-cell="link" class="layui-btn layui-btn-sm layui-btn-primary" lay-event="link">link</button>',"table-cell":""+'<a moire-cell="view" class="layui-btn layui-btn-xs layui-btn-primary" lay-event="view">view</a>'+'<a moire-cell="edit" class="layui-btn layui-btn-xs moire-bg-green-light" lay-event="edit">edit</a>'+'<a moire-cell="delete" class="layui-btn layui-btn-xs layui-btn-danger moire-bg-red-light" lay-event="delete">delete</a>'+'<a moire-cell="link" class="layui-btn layui-btn-xs layui-btn-primary" lay-event="link">link</a>'});fxView["machine"]["deployer"](["material","template","view"],{search:""+'<form class="layui-form layui-elem-quote layui-col-space5 moire-clear moire-search"></form>',table:""+'<div id="moire-table" class="moire-table" lay-filter="moire-table"></div>',view:""+'<form class="layui-form moire-view">'+'<div class="layui-table moire-clear moire-table">'+"</div>"+'<div class="moire-buttons">'+'<div class="moire-button"></div>'+'<div class="moire-button"></div>'+"</div>"+"</form>",video:'<video class="video-js media-video"></video>',image:'<img class="media-image">'});fxView["machine"]["deployer"](["mould","tool","delete","main"],function(){var e=[null,"layui"];e=fxBase["param"]["merge"](e,arguments);if(!isFunction(fxView["machine"]["caller"](["mould","tool","delete","skin",e[1]]))){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[e[1],"plugin","not loaded"]}])}fxView["machine"]["caller"](["before"],e,e[0]);fxView["machine"]["caller"](["mould","tool","delete","skin",e[1]],e);fxView["machine"]["caller"](["after"],e,e[0])});fxView["machine"]["deployer"](["mould","tool","delete","skin","layui"],function(){var i=fxBase["param"]["merge"]({},fxView["shelf"]["view"]);var l={};i=fxBase["param"]["merge"](i,arguments[0]);l[i["model"]["key"]]=[];if(!isSet(i["api"]["delete"])){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:["delete","feature","not configured"]}])}l["reload"]=true;if(isObject(i["param"])){l["reload"]=false}if(!isArray(i["param"])){i["param"]=[i["param"]]}if(isEmpty(i["param"])){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:["please","choice","data"]}])}$.each(i["param"],function(e,a){if(isNumeric(a)||isString(a)){l[i["model"]["key"]].push(a)}else if(isObject(a)&&isSet(a[i["model"]["key"]])){l[i["model"]["key"]].push(a[i["model"]["key"]])}});layui.layer.confirm("是否确认删除？",{icon:0,title:null,closeBtn:0,success:function(e,a){l["layer.index"]=fxBase["text"]["implode"]("-",[$(e[0]).attr("times"),fxApp["rank"]["self.code"],"layui"]);fxApp["rank"]["self.layer.index.set"](l["layer.index"])},end:function(){fxApp["rank"]["self.layer.index.destroy"](l["layer.index"])}},function(e){l["echo"]={url:i["api"]["delete"],async:false,data:{data:{}}};l["echo"]["data"]["data"][i["model"]["key"]]=l[i["model"]["key"]];l["echo"]=fxView["store"]["deal"](l["echo"]);if(l["echo"]["code"]==200&&l["reload"]){i["table"].reload()}else if(l["echo"]["code"]==200){i["event"].del()}fxApp["rank"]["self.layer.index.destroy"](l["layer.index"]);layui.layer.close(e)})});fxView["machine"]["deployer"](["mould","tool","download","main"],function(){var e=[null,"layui"];e=fxBase["param"]["merge"](e,arguments);if(!isFunction(fxView["machine"]["caller"](["mould","tool","download","skin",e[1]]))){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[e[1],"plugin","not loaded"]}])}fxView["machine"]["caller"](["before"],e,e[0]);fxView["machine"]["caller"](["mould","tool","download","skin",e[1]],e);fxView["machine"]["caller"](["after"],e,e[0])});fxView["machine"]["deployer"](["mould","tool","download","skin","layui"],function(){var e=fxBase["param"]["merge"]({},fxView["shelf"]["view"]);var a={};a[e["model"]["key"]]=[];if(!isSet(e["api"]["download"])){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:["download","feature","not configured"]}])}window.open(e["api"]["download"])});fxView["machine"]["deployer"](["mould","tool","export","main"],function(){var e=[null,"layui"];e=fxBase["param"]["merge"](e,arguments);if(!isFunction(fxView["machine"]["caller"](["mould","tool","export","skin",e[1]]))){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[e[1],"plugin","not loaded"]}])}fxView["machine"]["caller"](["before"],e,e[0]);fxView["machine"]["caller"](["mould","tool","export","skin",e[1]],e);fxView["machine"]["caller"](["after"],e,e[0])});fxView["machine"]["deployer"](["mould","tool","export","skin","layui"],function(){var i=fxBase["param"]["merge"]({limit:1e5},fxView["shelf"]["view"]);var l={};i=fxBase["param"]["merge"](i,arguments[0]);l[i["model"]["key"]]=[];if(!isSet(i["api"]["export"])){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:["export","feature","not configured"]}])}if(!isArray(i["param"])){i["param"]=[i["param"]]}$.each(i["param"],function(e,a){if(isNumeric(a)||isString(a)){l[i["model"]["key"]].push(a)}else if(isObject(a)&&isSet(a[i["model"]["key"]])){l[i["model"]["key"]].push(a[i["model"]["key"]])}});if(isEmpty(l[i["model"]["key"]])&&(!isObject(fxView["cache"]["echo"]["list"])||fxView["cache"]["echo"]["list"]["extend"]["total_count"]>i["limit"])){l["message"]="推荐将数据筛选至"+i["limit"]+"条以内，数据过多将有可能导出失败";layui.layer.confirm(l["message"],{title:false,closeBtn:false,success:function(e,a){l["layer.index"]=fxBase["text"]["implode"]("-",[$(e[0]).attr("times"),fxApp["rank"]["self.code"],"layui"]);fxApp["rank"]["self.layer.index.set"](l["layer.index"])},end:function(){fxApp["rank"]["self.layer.index.destroy"](l["layer.index"])}},function(e){fxApp["rank"]["self.layer.index.destroy"](l["layer.index"]);layui.layer.close(e);a()})}else{a()}function a(){l["param"]=fxBase["param"]["url"]({type:"2.1"});l["param"]["base"]["token"]=fxApp["user"]["base"]["token"];if(!isEmpty(l[i["model"]["key"]])){fxView["machine"]["deployer"](["param","data",i["model"]["key"]],l[i["model"]["key"]],l)}l["param"]["base"]["page"]=1;l["param"]["base"]["limit"]=-1;l["url"]=fxBase["param"]["url"]({type:"1.1",url:i["api"]["export"],param:l["param"]});window.open(l["url"])}});fxView["machine"]["deployer"](["mould","tool","import","main"],function(){var e=[null,"layui"];e=fxBase["param"]["merge"](e,arguments);if(!isFunction(fxView["machine"]["caller"](["mould","tool","import","skin",e[1]]))){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[e[1],"plugin","not loaded"]}])}fxView["machine"]["caller"](["before"],e,e[0]);fxView["machine"]["caller"](["mould","tool","import","skin",e[1]],e);fxView["machine"]["caller"](["after"],e,e[0])});fxView["machine"]["deployer"](["mould","tool","import","skin","layui"],function(){var e=fxBase["param"]["merge"]({},fxView["shelf"]["view"]);var a={};e=fxBase["param"]["merge"](e,arguments[0]);a[e["model"]["key"]]=[];if(!isSet(e["api"]["import"])){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:["import","feature","not configured"]}])}});fxView["machine"]["deployer"](["mould","tool","message","main"],function(){var e=[null,"layui"];e=fxBase["param"]["merge"](e,arguments);if(!isFunction(fxView["machine"]["caller"](["mould","tool","message","skin",e[1]]))){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[e[1],"plugin","not loaded"]}])}fxView["machine"]["caller"](["before"],e,e[0]);fxView["machine"]["caller"](["mould","tool","message","skin",e[1]],e);fxView["machine"]["caller"](["after"],e,e[0])});fxView["machine"]["deployer"](["mould","tool","message","skin","layui"],function(){var e={text:"",icon:"info",hideAfter:1500,position:"bottom-left",stack:1,window:top};e=fxBase["param"]["merge"](e,arguments[0]);e["text"]=fxBase["base"]["lang"](e["text"]);e["window"].$.toast(e)});fxView["machine"]["deployer"](["mould","tool","window","main"],function(){var e=[null,"layx"];e=fxBase["param"]["merge"](e,arguments);if(!isFunction(fxView["machine"]["caller"](["mould","tool","window","skin",e[1]]))){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[e[1],"plugin","not loaded"]}])}fxView["machine"]["caller"](["before"],e,e[0]);fxView["machine"]["caller"](["mould","tool","window","skin",e[1]],e);fxView["machine"]["caller"](["after"],e,e[0])});fxView["machine"]["deployer"](["mould","tool","window","skin","layui"],function(){var i=fxBase["param"]["merge"]({subtitle:null,event:{},option:{type:2,skin:"moire-window",area:["70%","70%"],shade:false,maxmin:true,scrollbar:false,zIndex:fxBase["base"]["maxZIndex"](),success:function(e,a){layui.layer.full(a);fxView["machine"]["deployer"](["rank"],{"parent.window":window,"self.layer.index":i["index"]},$(e[0]).find("iframe").prop("contentWindow").fxApp);fxView["machine"]["caller"](["event","success"],[e,a,i],i)},end:function(){fxApp["rank"]["self.layer.index.destroy"](i["index"]);fxView["machine"]["caller"](["event","end"],[i],i)}},window:window},fxView["shelf"]["view"]);var e={};i=fxBase["param"]["merge"](i,arguments[0]);if(!isSet(i["page"][i["elem"]])){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[i["elem"],"window","feature","not configured"]}])}e["url"]=fxBase["param"]["url"]({type:"1.2",url:i["page"][i["elem"]],param:fxBase["param"]["url"]({type:"2.1",url:i["page"][i["elem"]],param:i["param"]})});i["option"]=fxBase["param"]["merge"]({title:fxBase["base"]["lang"]([fxApp["view"]["name"],i["subtitle"]]),content:e["url"]},i["option"]);i["index"]=i["window"].layui.layer.open(i["option"]);i["index"]=fxBase["text"]["implode"]("-",[i["index"],fxApp["rank"]["self.code"],"layui"]);fxApp["rank"]["self.layer.index.set"](i["index"])});fxView["machine"]["deployer"](["mould","tool","window","skin","layx"],function(){var n=fxBase["param"]["merge"]({subtitle:null,event:{},option:{icon:false,width:"70%",height:"70%",minWidth:200,minHeight:200,storeStatus:false,dragInTopToMax:false,isOverToMax:false,position:"ct",control:true,escKey:false,style:"",controlStyle:"",bgColor:"#fff",shadow:true,border:false,borderRadius:"0",skin:"default",focusToReveal:true,type:"url",dialogIcon:"",floatTarget:false,floatDirection:"ct",existFlicker:true,useFrameTitle:false,opacity:1,shadable:false,shadeDestroy:false,readonly:false,loadingText:"内容正在加载中，请稍后",stickMenu:true,stickable:true,minMenu:true,minable:true,maxMenu:true,maxable:true,closeMenu:true,closable:true,restorable:true,autodestroy:true,autodestroyText:"此窗口将在 <strong>{second}</strong> 秒内自动关闭.",resizable:true,resizeLimit:{t:false,r:false,b:false,l:false,lt:false,rt:false,lb:false,rb:false},movable:true,moveLimit:{vertical:false,horizontal:false,leftOut:true,rightOut:true,topOut:true,bottomOut:true},focusable:true,alwaysOnTop:false,allowControlDbclick:true,statusBar:"",statusBarStyle:"",event:{onload:{before:function(e,a){a.area=n["proxy"]["decimal"](a.area);i["area"]=JSON.parse(JSON.stringify(a.area));$(e).addClass("moire-window");fxView["machine"]["caller"](["event","onload","before"],[e,a,n],n)},after:function(e,a){n["extend"]["autoMax"]&&n["window"].layx.max(n["self"].id);fxView["machine"]["deployer"](["rank"],{"parent.window":window,"self.layer.index":n["index"]},$(e).find("iframe").prop("contentWindow").fxApp);$(top.window).on("resize",function(){if(n["extend"]["status"]!="max")return;n["window"].layx.max(n["self"].id)});fxView["machine"]["caller"](["event","onload","after"],[e,a,n],n)}},onmin:{before:function(e,a){fxView["machine"]["caller"](["event","onmin","before"],[e,a,n],n)},after:function(e,a){n["extend"]["status"]=a.status;fxView["machine"]["caller"](["event","onmin","after"],[e,a,n],n)}},onmax:{before:function(e,a){fxView["machine"]["caller"](["event","onmax","before"],[e,a,n],n)},after:function(e,a){n["extend"]["status"]=a.status;fxView["machine"]["caller"](["event","onmax","after"],[e,a,n],n)}},onrestore:{before:function(e,a){fxView["machine"]["caller"](["event","onrestore","before"],[e,a,n],n)},after:function(e,a){n["extend"]["status"]=a.status;fxView["machine"]["caller"](["event","onrestore","after"],[e,a,n],n)}},ondestroy:{before:function(e,a,i,l,t){fxView["machine"]["caller"](["event","ondestroy","before"],[e,a,i,l,t,n],n)},after:function(){fxApp["rank"]["self.layer.index.destroy"](n["index"]);fxView["machine"]["caller"](["event","ondestroy","after"],[n],n)}},onvisual:{before:function(e,a,i,l,t){fxView["machine"]["caller"](["event","onvisual","before"],[e,a,i,l,t,n],n)},after:function(e,a,i){fxView["machine"]["caller"](["event","onvisual","after"],[e,a,i,n],n)}},onmove:{before:function(e,a){i["area"]["z-index"]=$(e).css("z-index");i["left"]=a.area.left;i["top"]=a.area.top;i["siteLeft"]=i["touchX"]-i["left"];i["siteTop"]=i["touchY"]-i["top"];i["left"]=i["left"]+i["siteLeft"]-i["siteLeft"]/a.area.width*i["area"]["width"];i["top"]=i["top"]+i["siteTop"]-i["siteTop"]/a.area.height*i["area"]["height"];n["window"].layx.setPosition(n["self"].id,[i["top"],i["left"]]);n["window"].layx.setSize(n["self"].id,{width:i["area"]["width"],height:i["area"]["height"]});fxView["machine"]["caller"](["event","onmove","before"],[e,a,n],n)},progress:function(e,a){i["left"]=a.area.left;i["top"]=a.area.top;i["width"]=a.area.width;i["height"]=a.area.height;n["move"]["touch"]();n["move"]["shadow"]();fxView["machine"]["caller"](["event","onmove","progress"],[e,a,n],n)},after:function(e,a){i["left"]=a.area.left;i["top"]=a.area.top;n["move"]["touch"]();i["shadow"]=false;n["move"]["shadow"]();n["window"].layx.setPosition(n["self"].id,[i["top"],i["left"]]);n["window"].layx.setSize(n["self"].id,{width:i["width"],height:i["height"]});fxView["machine"]["caller"](["event","onmove","after"],[e,a,n],n)}},onresize:{before:function(e,a){fxView["machine"]["caller"](["event","onresize","before"],[e,a,n],n)},progress:function(e,a){fxView["machine"]["caller"](["event","onresize","progress"],[e,a,n],n)},after:function(e,a){i["area"]=JSON.parse(JSON.stringify(a.area));fxView["machine"]["caller"](["event","onresize","after"],[e,a,n],n)}},onfocus:function(e,a){fxView["machine"]["caller"](["event","onfocus"],[e,a,n],n)},onexist:function(e,a){fxView["machine"]["caller"](["event","onexist"],[e,a,n],n)},onswitch:{before:function(e,a,i){fxView["machine"]["caller"](["event","onswitch","before"],[e,a,i,n],n)},after:function(e,a,i){fxView["machine"]["caller"](["event","onswitch","after"],[e,a,i,n],n)}},onstick:{before:function(e,a){fxView["machine"]["caller"](["event","onstick","before"],[e,a,n],n)},after:function(e,a){fxView["machine"]["caller"](["event","onstick","after"],[e,a,n],n)}}}},move:{touch:function(){if(false!==n["move"]["touchTimer"]){clearTimeout(n["move"]["touchTimer"]);n["move"]["touchTimer"]=false}i["wallWidth"]=window.innerWidth;i["wallHeight"]=window.innerHeight;i["wallCorner"]=n["move"]["touchCorner"];i["wallEdge"]=n["move"]["touchEdge"];i["shadow"]=true;if(i["touchX"]<=i["wallCorner"]&&i["touchY"]<=i["wallCorner"]){i["left"]=0;i["top"]=0;i["width"]=i["wallWidth"]/2;i["height"]=i["wallHeight"]/2}else if(i["touchX"]>=i["wallWidth"]-i["wallCorner"]&&i["touchY"]<=i["wallCorner"]){i["left"]=i["wallWidth"]/2;i["top"]=0;i["width"]=i["wallWidth"]/2;i["height"]=i["wallHeight"]/2}else if(i["touchX"]>=i["wallWidth"]-i["wallCorner"]&&i["touchY"]>=i["wallHeight"]-i["wallCorner"]){i["left"]=i["wallWidth"]/2;i["top"]=i["wallHeight"]/2;i["width"]=i["wallWidth"]/2;i["height"]=i["wallHeight"]/2}else if(i["touchX"]<=i["wallCorner"]&&i["touchY"]>=i["wallHeight"]-i["wallCorner"]){i["left"]=0;i["top"]=i["wallHeight"]/2;i["width"]=i["wallWidth"]/2;i["height"]=i["wallHeight"]/2}else if(i["touchY"]<=i["wallEdge"]){i["left"]=0;i["top"]=0;i["width"]=i["wallWidth"];i["height"]=i["wallHeight"]/2}else if(i["touchX"]>=i["wallWidth"]-i["wallEdge"]){i["left"]=i["wallWidth"]/2;i["top"]=0;i["width"]=i["wallWidth"]/2;i["height"]=i["wallHeight"]}else if(i["touchY"]>=i["wallHeight"]-i["wallEdge"]){i["left"]=0;i["top"]=i["wallHeight"]/2;i["width"]=i["wallWidth"];i["height"]=i["wallHeight"]/2}else if(i["touchX"]<=i["wallEdge"]){i["left"]=0;i["top"]=0;i["width"]=i["wallWidth"]/2;i["height"]=i["wallHeight"]}else{i["shadow"]=false}},touchCorner:50,touchEdge:20,touchTime:1e3,shadow:function(){i["shadowElem"]=$(".moire-window-shadow");if(!i["shadow"]&&false!==n["move"]["shadowTimer"]){return false}else if(!i["shadow"]){n["move"]["shadowTimer"]=setTimeout(function(){i["shadowElem"].hide()},n["move"]["shadowTime"]);i["shadowElem"].css({opacity:0});return false}else if(false!==n["move"]["shadowTimer"]){clearTimeout(n["move"]["shadowTimer"]);n["move"]["shadowTimer"]=false;i["shadowElem"].attr({style:null});i["shadowElem"].show();i["shadowElem"].css({left:i["touchX"],top:i["touchY"],width:0,height:0,opacity:1,transition:"all 0.3s"})}i["shadowElem"].css({left:i["left"]+n["move"]["shadowZoom"],top:i["top"]+n["move"]["shadowZoom"],width:i["width"]-n["move"]["shadowZoom"]*2,height:i["height"]-n["move"]["shadowZoom"]*2,"z-index":i["area"]["z-index"]-1})},shadowZoom:10,shadowTime:300},extend:{status:null,autoMax:true},proxy:{decimal:function(){var e={};e["target"]=arguments[0];if(!isAorO(e["target"])){return false}e["target"]=new Proxy(e["target"],{get:function(e,a){if(isNumeric(e[a])){e[a]=Math.round(e[a]*100)/100}return e[a]}});return e["target"]}},window:window},fxView["shelf"]["view"]);var i={};n=fxBase["param"]["merge"](n,arguments[0]);if(!isSet(n["page"][n["elem"]])){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[n["elem"],"window","feature","not configured"]}])}i["url"]=fxBase["param"]["url"]({type:"1.2",url:n["page"][n["elem"]],param:fxBase["param"]["url"]({type:"2.1",url:n["page"][n["elem"]],param:n["param"]})});n["option"]=fxBase["param"]["merge"]({id:md5(i["url"]),title:fxBase["base"]["lang"]([fxApp["view"]["name"],n["subtitle"]]),url:i["url"]},n["option"]);n["self"]=n["window"].layx.open(n["option"]);n["index"]=fxBase["text"]["implode"]("-",[n["self"].id,fxApp["rank"]["self.code"],"layx"]);fxApp["rank"]["self.layer.index.set"](n["index"]);$(n["self"].layxWindow).on("mousemove touchmove mouseleave",function(e){var a;if(e.originalEvent.targetTouches){a=e.originalEvent.targetTouches[0]}else{a=e}i["touchX"]=a.pageX;i["touchY"]=a.pageY});$(document).on("mouseleave",function(e){n["move"]["touchTimer"]=setTimeout(function(){$(n["self"].layxWindow).trigger("mouseup")},n["move"]["touchTime"])})});$(document).ready(function(){$("head").append('<style type="text/css">.moire-window-shadow {'+"position: fixed;"+"left: 0;"+"top: 0;"+"display: none;"+"width: 0;"+"height: 0;"+"box-shadow: rgba(0, 0, 0, 0.3) 1px 1px 24px;"+"}</style>");$("body").append('<div class="moire-window-shadow"></div>')});fxView["machine"]["deployer"](["rank"],{"self.code":md5(window.location.href+fxBase["text"]["mtime"]()),"self.layer.window":{},"self.layer.index.list":[],"self.layer.index.set":function(){var e={0:null};e=fxBase["param"]["merge"](e,arguments);if(!isArray(top.fxApp["rank"]["self.layer.index.list"])||!isSet(e[0]))return false;fxApp["rank"]["self.layer.index.destroy"](e[0]);top.fxApp["rank"]["self.layer.index.list"].unshift(e[0])},"self.layer.index.destroy":function(){var e={0:null};e=fxBase["param"]["merge"](e,arguments);if(!isArray(top.fxApp["rank"]["self.layer.index.list"])||!isSet(e[0]))return false;e["index"]=fxBase["param"]["arraySearch"](e[0],top.fxApp["rank"]["self.layer.index.list"]);if(false!==e["index"]){top.fxApp["rank"]["self.layer.index.list"].splice(e["index"],1)}},"self.layer.close":function(){var e={0:null};e=fxBase["param"]["merge"](e,arguments);if(!isSet(e[0]))return false;e["data"]=fxBase["text"]["explode"]("-",e[0]);e["window"]=top.fxApp["rank"]["self.layer.window"][e["data"][1]];fxApp["rank"]["self.layer.index.destroy"](e[0]);if(!isSet(e["window"]))return false;switch(e["data"][2]){case"layui":e["window"].layui.layer.close(e["data"][0]);break;case"layx":e["window"].layx.destroy(e["data"][0]);break}},"parent.layui.table.reload":function(){var e={0:null};e=fxBase["param"]["merge"](e,arguments);if(!isSet(fxApp["rank"]["parent.window"])||!isSet(e[0]))return false;fxApp["rank"]["parent.window"].layui.table.reload(e[0])}},fxApp);top.fxApp["rank"]["self.layer.window"][fxApp["rank"]["self.code"]]=window;$(document).on("keydown",function(e){if(e.keyCode==27&&top.fxApp["rank"]["self.layer.index.list"].length>0){fxApp["rank"]["self.layer.close"](top.fxApp["rank"]["self.layer.index.list"][0])}});fxView["machine"]["deployer"](["mould","view","add","main"],function(){var e=[null,"layui"];e=fxBase["param"]["merge"](e,arguments);if(!isFunction(fxView["machine"]["caller"](["mould","view","add","skin",e[1]]))){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[e[1],"plugin","not loaded"]}])}fxView["machine"]["caller"](["before"],e,e[0]);fxView["machine"]["caller"](["mould","view","add","skin",e[1]],e);fxView["machine"]["caller"](["after"],e,e[0])});fxView["machine"]["deployer"](["mould","view","add","skin","layui"],function(){var e={base:{source:false},toolbar:{0:fxBase["base"]["template"]({elem:"tool",type:"view-edit",cell:"submit,reset,clear"}).html(),1:fxBase["base"]["template"]({elem:"tool",type:"view-edit",cell:"close"}).html()}};e=fxBase["param"]["merge"](e,arguments[0]);fxView["machine"]["caller"](["mould","view","view","main"],[e])});fxView["machine"]["deployer"](["mould","view","edit","main"],function(){var e=[null,"layui"];e=fxBase["param"]["merge"](e,arguments);if(!isFunction(fxView["machine"]["caller"](["mould","view","edit","skin",e[1]]))){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[e[1],"plugin","not loaded"]}])}fxView["machine"]["caller"](["before"],e,e[0]);fxView["machine"]["caller"](["mould","view","edit","skin",e[1]],e);fxView["machine"]["caller"](["after"],e,e[0])});fxView["machine"]["deployer"](["mould","view","edit","skin","layui"],function(){var e={base:{},toolbar:{0:fxBase["base"]["template"]({elem:"tool",type:"view-edit",cell:"submit,reset,clear"}).html(),1:fxBase["base"]["template"]({elem:"tool",type:"view-edit",cell:"close"}).html()}};e=fxBase["param"]["merge"](e,arguments[0]);fxView["machine"]["caller"](["mould","view","view","main"],[e])});fxView["machine"]["deployer"](["mould","view","list","main"],function(){var e=[null,"layui"];e=fxBase["param"]["merge"](e,arguments);if(!isFunction(fxView["machine"]["caller"](["mould","view","list","skin",e[1]]))){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[e[1],"plugin","not loaded"]}])}fxView["machine"]["caller"](["before"],e,e[0]);fxView["machine"]["caller"](["mould","view","list","skin",e[1]],e);fxView["machine"]["caller"](["after"],e,e[0])});fxView["machine"]["deployer"](["mould","view","list","skin","layui"],function(){var t={base:fxBase["param"]["merge"]({debug:false,skin:"table"},fxView["shelf"]["view"]),data:function(e){e["order"]=!isBlank(e["order"])?e["order"]:"";e["page"]=!isBlank(e["page"])?e["page"]:1;e["limit"]=!isBlank(e["limit"])?e["limit"]:20;return e},search:{},table:{id:"moire-table",elem:"#moire-table",title:fxApp["view"]["title"],cols:[],text:{none:fxBase["base"]["lang"](["empty","data"])},even:true,loading:true,autoSort:false,toolbar:true,defaultToolbar:["filter"],where:{base:{token:fxApp["user"]["base"]["token"]},data:fxApp["data"]},page:{limits:[10,20,30,40,50,60,70,80,90,100]},request:{pageName:"base[page]",limitName:"base[limit]"},response:{statusName:"code",statusCode:200,msgName:"messages"},parseData:function(e){fxApp=fxBase["param"]["merge"](fxApp,this.where);var a=fxBase["param"]["url"]({type:"1.1",param:{base:{order:this.where.base.order,page:this.page.curr,limit:this.page.limit},data:this.where.data}});window.history.replaceState(null,null,a);if(self!=top&&parent==top){a=fxBase["param"]["url"]({type:"1.1",window:top,param:{data:{frame:encodeURIComponent(a)}}});top.history.replaceState(null,null,a)}if(e["extend"]["total_page"]>0&&e["data"].length==0&&e["extend"]["page"]!=e["extend"]["total_page"]){n["table"].reload({page:{curr:e["extend"]["total_page"]}},true)}e["count"]=e["extend"]["total_count"];return e},done:function(e,a,i){fxView["cache"]["echo"]["list"]=e;$.each(n["list"],function(e,a){switch(a["dark"]["skin"]){case"table":case"table_link":a["base"]["pack"]["elem"]=$("tbody [data-field="+a["base"]["pack"]["field"]+"]");a["base"]["pack"]["elem"].attr(a["dark"]["wrapBox"]["attr"]);break}a["done"]()});$(window).trigger("resize");fxView["layui"]["init"]({type:"table"});$("[lay-id=moire-table] img").viewer("update");$("[lay-id=moire-table],.layui-table-main>.layui-table").off("resize");$("[lay-id=moire-table],.layui-table-main>.layui-table").on("resize",function(){n["tableMain"]=$(".layui-table-box>.layui-table-header tr,.layui-table-box>.layui-table-body tr");n["tableLeft"]=$(".layui-table-fixed-l tr");n["tableRight"]=$(".layui-table-fixed-r tr");$.each(n["tableMain"],function(e,a){n["tableLeft"].eq(e).height($(a).height());n["tableRight"].eq(e).height($(a).height())})});$("[lay-id=moire-table]").trigger("resize")}}};var n={};t=fxBase["param"]["merge"](t,arguments[0]);if(!isEmpty(t["search"])){$(".moire-wapper").append(fxBase["base"]["template"]({elem:"view",type:"search"}).html())}if(!isEmpty(t["table"])){$(".moire-wapper").append(fxBase["base"]["template"]({elem:"view",type:"table"}).html())}if(!isEmpty(t["search"])){fxView["machine"]["caller"](["mould","view","search","main"],[t["search"]]);n["search"]=$(".moire-search")}else{n["search"]=$("<div></div>")}n["height"]=$(window).height()-n["search"].outerHeight(true);if(!isSet(t["base"]["api"]["list"])){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:["list","not configured"]}])}n["list"]=fxView["cache"]["elem"]["table"]={};$.each(t["table"]["cols"],function(l,e){$.each(e,function(e,i){i["title"]=fxBase["base"]["lang"](i["title"]);if(isFunction(i["templet"])||!isObject(i["extend"]))return true;i["extend"]["id"]=fxBase["text"]["explode"](",",i["extend"]["id"]);i["extend"]["type"]=fxBase["text"]["explode"](",",i["extend"]["type"]);$.each(i["extend"]["type"],function(e,a){if(!isFunction(fxView["machine"]["caller"](["material","elem",a,"main"]))){if(t["base"]["debug"]){console.log(fxBase["base"]["lang"](["material","element","[",fxApp["view"]["langc"]["prefix"]+i,"]","not2","load"]))}return true}n["base"]={};n["base"]["cache"]=n["list"];n["base"]["mould"]=t;n["base"]["pack"]=i;n["data"]=fxBase["param"]["merge"]({field:i["field"],title:i["title"],skin:t["base"]["skin"]},i["extend"]);n["data"]["id"]=!isBlank(i["extend"]["id"][e])?i["extend"]["id"][e]:l+"-"+i["field"]+"-"+e;n["data"]["type"]=a;n["list"][n["data"]["id"]]=fxView["machine"]["caller"](["material","elem",a,"main"],[]);n["list"][n["data"]["id"]]["init"](n["data"],n["base"])})})});$.each(n["list"],function(e,a){a["deploy"]();a["base"]["pack"]["templet"]=a["dark"]["templet"]});$(window).on("resize",function(){n["fixed"]=$(".layui-table-fixed");n["view"]=$(".layui-table-view");n["height"]=$(window).height()-n["search"].outerHeight(true);if(isSet(n["table"])){n["view"].css("height",n["height"]);n["table"].config.height=n["height"];n["table"].resize()}if($(window).width()<800){n["fixed"].css("display","none")}else{n["fixed"].css("display","")}if(self!=top){$(top.window).trigger("resize")}});$(".moire-wapper").on("resize",function(){n["height"]=$(window).height()-n["search"].outerHeight(true)});if($(window).height()<600){n["search"].find(".moire-switch").trigger("click")}if(self!=top&&parent==top){$(top.document).find("title").html(fxApp["view"]["title"]+" - "+top.fxApp["env"]["title"])}fxApp["base"]=t["data"](fxApp["base"]);t["table"]=fxBase["param"]["merge"](t["table"],{url:t["base"]["api"]["list"],height:n["height"],where:{base:{order:fxApp["base"]["order"]},data:a()},page:{curr:fxApp["base"]["page"],limit:fxApp["base"]["limit"]}});n["table"]=layui.table.render(t["table"]);layui.form.on("submit(moire-submit)",function(e){n["table"].reload({where:{base:{order:fxApp["base"]["order"]},data:a()}},true);return false});function a(){n["data"]={};$.each(fxView["cache"]["elem"]["search"],function(e,a){a["echo"]();if(!isSet(a["dark"]["echo"])||a["dark"]["echoSwitch"]!=1)return true;n["data"][a["dark"]["field"]]=a["dark"]["echo"]});$.each(n["data"],function(e,a){if(!isAorO(a))return true;n["data"][e]=JSON.stringify(a)});return n["data"]}fxBase["dom"]["trigger"]();layui.table.on("sort(moire-table)",function(i){var l=fxApp["base"]["order"];l=fxBase["text"]["explode"](",",l);$.each(l,function(e,a){if(a.indexOf(i.field)==0){l.splice(e,1);return false}});if(isSet(i.type)){l.unshift(i.field+" "+i.type)}l=l.join(",");fxApp["base"]["order"]=l;n["table"].reload({where:{base:{order:l}}},true)});layui.form.on("switch",function(e){var a={data:{}};a["data"][t["base"]["model"]["key"]]=this.value;a["echo"]=fxBase["data"]["fieldValue"](e["elem"]["name"],e["elem"]["checked"]?1:0);a["data"]=fxBase["param"]["merge"](a["data"],a["echo"]);fxView["store"]["deal"]({url:t["base"]["api"]["edit"],data:{base:{strict:0},data:a["data"]},extend:{elem:e.othis}})});layui.table.on("edit(moire-table)",function(i){var l={data:{}};l["data"][t["base"]["model"]["key"]]=i.data[t["base"]["model"]["key"]];l["elem"]=$(i.tr).parents(".layui-table-view").find(".layui-table-header");l["echo"]=fxBase["data"]["fieldValue"](i.field,i.value);l["data"]=fxBase["param"]["merge"](l["data"],l["echo"]);n["echo"]=fxView["store"]["deal"]({url:t["base"]["api"]["edit"],async:false,data:{base:{strict:0},data:l["data"]},extend:{elem:$(this).parent(),tips:false}});try{if(n["echo"]["code"]==-1){n["echo"]["message"]=fxBase["base"]["lang"](["system","abend"])}if(n["echo"]["code"]==200){layui.layer.tips(n["echo"]["message"],$(this).parent(),{time:800,tips:fxBase["math"]["rand"](1,4),tipsMore:true})}else{if(isObject(n["echo"]["extend"]["error"])){n["echo"]["message"]=[];$.each(n["echo"]["extend"]["error"]["data"],function(e,a){if(l["elem"].find("th[data-field="+e+"]").length>0){e=l["elem"].find("th[data-field="+e+"]").find("span:first").html()}else{e=l["elem"].find("th[data-field="+i.field+"]").find("span:first").html()}if(n["echo"]["message"].length>0){n["echo"]["message"].push("and2")}switch(n["echo"]["extend"]["error"]["name"]){default:n["echo"]["message"].push(["[",e,"]"]);break;case"exist":n["echo"]["message"].push(["[",e,":",a,"]"]);break}});switch(n["echo"]["extend"]["error"]["name"]){default:n["echo"]["message"]=fxBase["base"]["lang"]([n["echo"]["message"]]);break;case"exist":n["echo"]["message"]=fxBase["base"]["lang"]([n["echo"]["message"],"existed"]);break;case"lack":n["echo"]["message"]=fxBase["base"]["lang"](["cannot be empty",n["echo"]["message"]]);break}}$.toast({text:n["echo"]["message"],icon:"error",hideAfter:2e3,position:"top-right",stack:3});l["data"][i.field]=i.tr.find("[data-field="+i.field+"] .layui-table-cell").html()}}catch(e){$.toast({text:fxBase["base"]["lang"](["system","abend"]),icon:"error",hideAfter:2e3,position:"top-right",stack:3});l["data"][i.field]=i.tr.find("[data-field="+i.field+"] .layui-table-cell").html()}function e(){i.update(l["data"])}setTimeout(e,30)});layui.table.on("toolbar(moire-table)",function(i){var e=layui.table.checkStatus(i.config.id)["data"];n["attrData"]=fxBase["text"]["explode"](",",$(this).attr("moire-data"));n["attrCell"]=$(this).attr("moire-cell");switch(i.event){default:if(isBlank(n["attrCell"]))return;n["param"]={elem:i.event,param:{},subtitle:i.event};$.each(n["attrData"],function(e,a){if(isFunction(fxView["shelf"]["view"]["data"][a])){n["data"]=fxView["shelf"]["view"]["data"][a](i.data)}else if(isSet(fxView["shelf"]["view"]["data"][a])){n["data"]=fxBase["data"]["fieldValue"](a,fxView["shelf"]["view"]["data"][a])}else{return true}n["param"]["param"]=fxBase["param"]["merge"](n["param"]["param"],n["data"])});fxView["machine"]["caller"](["mould","tool","window","main"],[n["param"]]);break;case"delete":n["param"]={event:i,param:e,table:n["table"]};fxView["machine"]["caller"](["mould","tool",i.event,"main"],[n["param"]]);break;case"import":case"export":case"download":n["param"]={param:e};fxView["machine"]["caller"](["mould","tool",i.event,"main"],[n["param"]]);break}});layui.table.on("tool(moire-table)",function(i){n["attrData"]=fxBase["text"]["explode"](",",$(this).attr("moire-data"));n["attrCell"]=$(this).attr("moire-cell");switch(i.event){case"cell":switch($(this).attr("data-edit")){case"text":$(this).children(".layui-table-edit").css("text-align",$(this).attr("align"));break}break;default:if(isBlank(n["attrCell"]))return;n["param"]={elem:i.event,param:{},subtitle:i.event};if(fxBase["param"]["inArray"](n["param"]["elem"],["view","edit"])&&!fxBase["param"]["inArray"]("key",n["attrData"])){n["attrData"].push("key")}$.each(n["attrData"],function(e,a){if(isFunction(fxView["shelf"]["view"]["data"][a])){n["data"]=fxView["shelf"]["view"]["data"][a](i.data)}else if(isSet(fxView["shelf"]["view"]["data"][a])){n["data"]=fxBase["data"]["fieldValue"](a,fxView["shelf"]["view"]["data"][a])}else{return true}n["param"]["param"]=fxBase["param"]["merge"](n["param"]["param"],n["data"])});fxView["machine"]["caller"](["mould","tool","window","main"],[n["param"]]);break;case"delete":n["param"]={event:i,param:i.data,table:n["table"]};fxView["machine"]["caller"](["mould","tool",i.event,"main"],[n["param"]]);break}})});fxView["machine"]["deployer"](["mould","view","search","main"],function(){var e=[null,"layui"];e=fxBase["param"]["merge"](e,arguments);if(!isFunction(fxView["machine"]["caller"](["mould","view","search","skin",e[1]]))){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[e[1],"plugin","not loaded"]}])}fxView["machine"]["caller"](["before"],e,e[0]);fxView["machine"]["caller"](["mould","view","search","skin",e[1]],e);fxView["machine"]["caller"](["after"],e,e[0])});fxView["machine"]["deployer"](["mould","view","search","skin","layui"],function(){var t={base:fxBase["param"]["merge"]({debug:false,skin:"search",tool:{switch:true}},fxView["shelf"]["view"]),data:null,toolbar:fxBase["base"]["template"]({elem:"tool",type:"view-search",cell:"submit,reset,clear,switch"}).html()};var n={};t=fxBase["param"]["merge"](t,arguments[0]);if(!isFunction(t["data"])){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:["search","feature","not configured"]}])}n["elem"]=$(".moire-search");n["list"]=fxView["cache"]["elem"]["search"]={};$.each(t["data"](t["base"]["param"]),function(i,l){l["id"]=fxBase["text"]["explode"](",",l["id"]);l["type"]=fxBase["text"]["explode"](",",l["type"]);if(!isSet(l["data"])&&isArray(l["dataRaw"])){l["data"]=fxView["machine"]["caller"](l["dataRaw"][1],null,l["dataRaw"][0]);l["data"]=isSet(l["data"])?l["data"]:l["dataRaw"][2]}$.each(l["type"],function(e,a){if(!isFunction(fxView["machine"]["caller"](["material","elem",a,"main"]))){if(t["base"]["debug"]){console.log(fxBase["base"]["lang"](["material","element","[",fxApp["view"]["langc"]["prefix"]+a,"]","not2","load"]))}return true}n["base"]={};n["base"]["cache"]=n["list"];n["base"]["mould"]=t;n["base"]["pack"]=n["elem"];n["data"]=fxBase["param"]["merge"]({field:i,skin:t["base"]["skin"]},l);n["data"]["id"]=!isBlank(l["id"][e])?l["id"][e]:i+"-"+e;n["data"]["type"]=a;n["list"][n["data"]["id"]]=fxView["machine"]["caller"](["material","elem",a,"main"],[]);n["list"][n["data"]["id"]]["init"](n["data"],n["base"])})});$.each(n["list"],function(e,a){a["deploy"]();a["reset"]();$(document).ready(function(){a["done"]()})});n["elem"].append('<div class="layui-col-xs12 moire-button">'+t["toolbar"]+"</div>");layui.form.render();$(".moire-search.layui-form").on("click",".moire-reset",function(){$.each(n["list"],function(e,a){a["reset"]()});layui.form.render()});$(".moire-search.layui-form").on("click",".moire-clean",function(){$.each(n["list"],function(e,a){a["clean"]()});layui.form.render()});$(".moire-search.layui-form").on("click",".moire-switch",function(){if(t["base"]["tool"]["switch"]){n["elem"].find("[moire-elem=elem]").hide();n["elem"].find(".moire-button>:not(.moire-switch)").hide();n["elem"].find(".moire-switch").html(fxBase["base"]["lang"](["unfold"]))}else{n["elem"].find("[moire-elem=elem]").show();n["elem"].find(".moire-button>:not(.moire-switch)").show();n["elem"].find(".moire-switch").html(fxBase["base"]["lang"](["fold"]))}t["base"]["tool"]["switch"]=!t["base"]["tool"]["switch"]})});fxView["machine"]["deployer"](["mould","view","view","main"],function(){var e=[null,"layui"];e=fxBase["param"]["merge"](e,arguments);if(!isFunction(fxView["machine"]["caller"](["mould","view","view","skin",e[1]]))){return fxView["machine"]["caller"](["mould","tool","message","main"],[{text:[e[1],"plugin","not loaded"]}])}fxView["machine"]["caller"](["before"],e,e[0]);fxView["machine"]["caller"](["mould","view","view","skin",e[1]],e);fxView["machine"]["caller"](["after"],e,e[0])});fxView["machine"]["deployer"](["mould","view","view","skin","layui"],function(){var t={base:fxBase["param"]["merge"]({debug:false,skin:"view",source:true},fxView["shelf"]["view"])};var n={};t=fxBase["param"]["merge"](t,arguments[0]);if(!isSet(t["base"]["api"]["elem"])){return $(document).ready(function(){fxView["machine"]["caller"](["mould","tool","message","main"],[{text:["api","not configured"]}]);fxApp["rank"]["self.layer.close"](fxApp["rank"]["self.layer.index"])})}t=fxBase["param"]["merge"](t,{data:null,title:null,window:{title:false},success:function(){fxApp["rank"]["parent.layui.table.reload"]("moire-table");fxApp["rank"]["self.layer.close"](fxApp["rank"]["self.layer.index"])},toolbar:{0:null,1:fxBase["base"]["template"]({elem:"tool",type:"view-edit",cell:"close"}).html()}},t);if(t["window"]["title"]&&self!=top){$(top.document).find("title").html(fxApp["view"]["title"]+" - "+top.fxApp["env"]["title"])}if(!isFunction(t["data"])){return $(document).ready(function(){fxView["machine"]["caller"](["mould","tool","message","main"],[{text:["feature","not configured"]}]);fxApp["rank"]["self.layer.close"](fxApp["rank"]["self.layer.index"])})}n["echo"]={};if(t["base"]["source"]){n["echo"]={url:t["base"]["api"]["elem"],type:"get",async:true,data:{data:t["base"]["param"]},success:function(e){n["echo"]=t["echo"]=e;if(n["echo"]["code"]!=200){fxView["machine"]["caller"](["mould","tool","message","main"],[{text:n["echo"]["message"]}]);return fxApp["rank"]["self.layer.close"](fxApp["rank"]["self.layer.index"])}else if(n["echo"]["data"].length==0){fxView["machine"]["caller"](["mould","tool","message","main"],[{text:["data","not","exists"]}]);return fxApp["rank"]["self.layer.close"](fxApp["rank"]["self.layer.index"])}fxView["machine"]["caller"](["cache","render",t["base"]["elem"]],[])}};n["echo"]["data"]["data"]=fxBase["param"]["merge"](n["echo"]["data"]["data"],fxApp["data"]);fxView["store"]["deal"](n["echo"])}$(".moire-wapper").append(fxBase["base"]["template"]({elem:"view",type:"view"}).html());$(".moire-wapper .moire-view").addClass(t["base"]["elem"]);$.each(t["toolbar"],function(e,a){$(".moire-view .moire-button").eq(e).append(a)});n["elem"]=$(".moire-view .moire-table");if(isSet(t["title"])){t["title"]=fxBase["base"]["lang"](t["title"]);n["elem"].before('<div class="moire-thead"><div moire-elem="title">'+t["title"]+"</div></div>")}n["list"]=fxView["cache"]["elem"][t["base"]["elem"]]={};fxView["machine"]["deployer"](["cache","render",t["base"]["elem"]],function(){$.each(t["data"](n["echo"]["data"]),function(i,l){l["id"]=fxBase["text"]["explode"](",",l["id"]);l["type"]=fxBase["text"]["explode"](",",l["type"]);if(!isSet(l["data"])&&isArray(l["dataRaw"])){l["data"]=fxView["machine"]["caller"](l["dataRaw"][1],null,l["dataRaw"][0]);l["data"]=isSet(l["data"])?l["data"]:l["dataRaw"][2]}$.each(l["type"],function(e,a){if(!isFunction(fxView["machine"]["caller"](["material","elem",a,"main"]))){if(t["base"]["debug"]){console.log(fxBase["base"]["lang"](["material","element","[",fxApp["view"]["langc"]["prefix"]+a,"]","not2","load"]))}return true}n["id"]=!isBlank(l["id"][e])?l["id"][e]:i+"-"+e;n["data"]=fxView["machine"]["caller"]([n["id"],"dark"],null,n["list"]);if(n["data"]){n["data"]=fxBase["param"]["merge"]({field:i,skin:t["base"]["skin"]},n["data"],l);n["data"]["id"]=md5(n["id"]);n["data"]["type"]=a;n["list"][n["id"]]["init"](n["data"]);return true}n["base"]={};n["base"]["cache"]=n["list"];n["base"]["mould"]=t;n["base"]["pack"]=n["elem"];n["data"]=fxBase["param"]["merge"]({field:i,skin:t["base"]["skin"]},l);n["data"]["id"]=md5(n["id"]);n["data"]["type"]=a;n["list"][n["id"]]=fxView["machine"]["caller"](["material","elem",a,"main"],[]);n["list"][n["id"]]["init"](n["data"],n["base"])})});$.each(n["list"],function(e,a){a["deploy"]();a["reset"]();$(document).ready(function(){a["done"]()})});layui.form.render();n["elem"].find("div[moire-cell]").viewer({title:false,zIndex:fxBase["base"]["maxZIndex"]()}).on("show",function(){fxApp["rank"]["self.layer.index.set"](md5(n["elem"].attr("class")))}).on("hide",function(){fxApp["rank"]["self.layer.index.destroy"](md5(n["elem"].attr("class")))})});n["echo"]["data"]={};fxView["machine"]["caller"](["cache","render",t["base"]["elem"]],[]);layui.form.on("submit(moire-submit)",function(e){var a=$(this);try{a.attr("disabled",true);n["data"]={};$.each(n["list"],function(e,a){if(!isSet(a["dark"]["echo"])||a["dark"]["echoSwitch"]!=1)return true;a["dark"]["echo"]=fxBase["data"]["fieldValue"](a["dark"]["field"],a["dark"]["echo"]);n["data"]=fxBase["param"]["merge"](n["data"],a["dark"]["echo"])});$.each(n["data"],function(e,a){if(!isAorO(a))return true;n["data"][e]=JSON.stringify(a)});n["echo"]=fxView["store"]["deal"]({url:t["base"]["api"][t["base"]["elem"]],async:false,data:{data:n["data"]},extend:{tips:false}});if(n["echo"]["code"]==-1){n["echo"]["message"]=fxBase["base"]["lang"](["system","abend"])}if(n["echo"]["code"]==200){layui.layer.msg(n["echo"]["message"],{icon:1,time:800},function(){t["success"]();a.attr("disabled",false)})}else{if(isObject(n["echo"]["extend"]["error"])){n["echo"]["message"]=[];$.each(n["echo"]["extend"]["error"]["data"],function(e,a){e=isSet(n["list"][e+"-0"])?fxBase["base"]["lang"](n["list"][e+"-0"]["dark"]["label"]):e;if(n["echo"]["message"].length>0){n["echo"]["message"].push("and2")}switch(n["echo"]["extend"]["error"]["name"]){default:n["echo"]["message"].push(["[",e,"]"]);break;case"exist":n["echo"]["message"].push(["[",e,":",a,"]"]);break}});switch(n["echo"]["extend"]["error"]["name"]){default:n["echo"]["message"]=fxBase["base"]["lang"]([n["echo"]["message"]]);break;case"exist":n["echo"]["message"]=fxBase["base"]["lang"]([n["echo"]["message"],"existed"]);break;case"lack":n["echo"]["message"]=fxBase["base"]["lang"](["cannot be empty",n["echo"]["message"]]);break}}layui.layer.msg(n["echo"]["message"],{icon:2,time:2e3},function(){a.attr("disabled",false)})}}catch(e){layui.layer.msg(fxBase["base"]["lang"](["system","abend"]),{icon:2,time:2e3},function(){a.attr("disabled",false)})}if(self==top){a.attr("disabled",false)}return false});$(".moire-view.layui-form .moire-submit").on("click",function(){var i;$.each(n["list"],function(e,a){i=a["echo"]();if(false===i){return false}});return i});$(".moire-view.layui-form .moire-reset").on("click",function(){$.each(n["list"],function(e,a){a["reset"]()});layui.form.render()});$(".moire-view.layui-form .moire-clean").on("click",function(){$.each(n["list"],function(e,a){a["clean"]()});layui.form.render()});$(".moire-button .moire-close").on("click",function(){fxApp["rank"]["self.layer.close"](fxApp["rank"]["self.layer.index"])})});